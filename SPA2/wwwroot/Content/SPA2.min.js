function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs;a=window;b=a.SPA2=a.SPA2||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=d.Obj=d.Obj||{};g=d.UI=d.UI||{};h=g.HtmlModule=g.HtmlModule||{};i=h.attr=h.attr||{};j=d.JavaScript=d.JavaScript||{};k=j.JSModule=j.JSModule||{};l=d.Utils=d.Utils||{};m=a.EventTarget;n=a.Node;o=a.Event;p=a.UIEvent;q=g.Doc=g.Doc||{};r=g.AttrProxy=g.AttrProxy||{};s=g.AttrModule=g.AttrModule||{};t=j.Pervasives=j.Pervasives||{};u=d.Unchecked=d.Unchecked||{};v=g.DomUtility=g.DomUtility||{};w=g.Attrs=g.Attrs||{};x=g.View=g.View||{};y=g.Array=g.Array||{};z=g.Elt=g.Elt||{};A=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};B=g.Docs=g.Docs||{};C=g.DocElemNode=g.DocElemNode||{};D=a.CharacterData;E=d.Arrays=d.Arrays||{};F=d.List=d.List||{};G=F.T=F.T||{};H=a.Object;I=g.Updates=g.Updates||{};J=g.Snap=g.Snap||{};K=g.An=g.An||{};L=g.Client=g.Client||{};M=L.Settings=L.Settings||{};N=g.Abbrev=g.Abbrev||{};O=N.Mailbox=N.Mailbox||{};P=L.Attrs=L.Attrs||{};Q=P.Dyn=P.Dyn||{};R=d.Enumerator=d.Enumerator||{};S=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};T=N.Fresh=N.Fresh||{};U=a.StartupCode$WebSharper_UI$Doc_Client=a.StartupCode$WebSharper_UI$Doc_Client||{};V=d.Collections=d.Collections||{};W=V.Dictionary=V.Dictionary||{};X=L.Docs=L.Docs||{};Y=X.RunState=X.RunState||{};Z=X.NodeSet=X.NodeSet||{};_0=g.Anims=g.Anims||{};_1=R.T=R.T||{};_2=d.Seq=d.Seq||{};_3=V.HashSet=V.HashSet||{};_4=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};_5=d.Concurrency=d.Concurrency||{};_6=g.AppendList=g.AppendList||{};_7=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_8=V.DictionaryUtil=V.DictionaryUtil||{};_9=d.Slice=d.Slice||{};_=d.Strings=d.Strings||{};$=g.Easing=g.Easing||{};ba=_5.AsyncBody=_5.AsyncBody||{};bb=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bc=_5.CT=_5.CT||{};bd=N.HashSet=N.HashSet||{};be=_5.Scheduler=_5.Scheduler||{};bf=d.CancellationTokenSource=d.CancellationTokenSource||{};bg=X.DomNodes=X.DomNodes||{};bh=d.Queue=d.Queue||{};bi=d.OperationCanceledException=d.OperationCanceledException||{};bj=V.HashSetUtil=V.HashSetUtil||{};bk=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bl=d.Lazy=d.Lazy||{};bm=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bn=bm.LazyRecord=bm.LazyRecord||{};bo=a.IntelliFactory;bp=bo&&bo.Runtime;bq=a.console;br=a.jQuery;bs=a.Date;c.Main=function(){q.RunById("main",q.Element("button",[r.Create("id","my-button"),s.Handler("click",function(bt){return function(bu){return a.alert(((((bp.Curried(function(bv,bw,bx,by){return bv("You clicked "+l.toSafe(bw)+" at x = "+a.String(bx)+", y = "+a.String(by)+".");},4))(a.id))(bt.id))(bu.clientX))(bu.clientY));};})],[q.TextNode("Click me!")]));};e.FailWith=function(bt){throw a.Error(bt);};e.KeyValue=function(bt){return[bt.K,bt.V];};f=d.Obj=bp.Class({Equals:function(bt){return this===bt;},GetHashCode:function(){return -1;}},null,f);i=h.attr=bp.Class({},f,i);k.GetFieldValues=function(bt){var bu,bv;bu=[];for(var bw in bt)bu.push(bt[bw]);return bu;};l.toSafe=function(bt){return bt==null?"":bt;};q=g.Doc=bp.Class({},f,q);q.Element=function(bt,bu,bv){var bw,bx;bw=r.Concat(bu);bx=q.Concat(bv);return z.New(v.CreateElement(bt),bw,bx);};q.RunById=function(bt,bu){var bv;bv=v.Doc().getElementById(bt);u.Equals(bv,null)?e.FailWith("invalid id: "+bt):q.Run(bv,bu);};q.Concat=function(bt){var bu;bu=y.ofSeqNonCopying(bt);return y.TreeReduce(q.Empty(),q.Append,bu);};q.TextNode=function(bt){return q.Mk({$:5,$0:v.CreateText(bt)},x.Const());};q.Run=function(bt,bu){q.LoadLocalTemplates$1();B.LinkElement(bt,bu.docNode);q.RunInPlace(false,bt,bu);};q.Empty=function(){return q.Mk(null,x.Const());};q.Append=function(bt,bu){return q.Mk({$:0,$0:bt.docNode,$1:bu.docNode},x.Map2Unit(bt.updates,bu.updates));};q.Mk=function(bt,bu){return new q.New(bt,bu);};q.LoadLocalTemplates$1=function(){if(!B.LocalTemplatesLoaded()){B.set_LocalTemplatesLoaded(true);q.LoadLocalTemplates("");}};q.RunInPlace=function(bt,bu,bv){var bw;bw=B.CreateRunState(bu,bv.docNode);x.Sink(K.get_UseAnimations()||M.BatchUpdatesEnabled()?O.StartProcessor(B.PerformAnimatedUpdate(bt,bw,bv.docNode)):function(){B.PerformSyncUpdate(bt,bw,bv.docNode);},bv.updates);};q.LoadLocalTemplates=function(bt){var bu;bu=B.LoadedTemplateFile("");bu.count>0?B.LoadedTemplates().set_Item(bt,bu):(function(){var bv,bw,bx,by;while(true){bv=a.document.querySelector("[ws-template]");if(u.Equals(bv,null)){bw=a.document.querySelector("[ws-children-template]");if(u.Equals(bw,null))return null;else{bx=bw.getAttribute("ws-children-template");bw.removeAttribute("ws-children-template");q.PrepareTemplate(bt,{$:1,$0:bx},function(bz){return function(){return v.ChildrenArray(bz);};}(bw));}}else{by=bv.getAttribute("ws-template");q.PrepareSingleTemplate(bt,{$:1,$0:by},bv);}}}(),B.LoadedTemplates().set_Item("",B.LoadedTemplateFile(bt)));};q.PrepareTemplate=function(bt,bu,bv){var bw,bx,by,bz,bA;if(!B.LoadedTemplateFile(bt).ContainsKey(bu==null?"":bu.$0)){bw=bv();for(bx=0,by=bw.length-1;bx<=by;bx++){bz=E.get(bw,bx);bA=bz.parentNode;u.Equals(bA,null)?void 0:bA.removeChild(bz);}q.PrepareTemplateStrict(bt,bu,bw,null);}};q.PrepareSingleTemplate=function(bt,bu,bv){var bw,bx,by;bv.removeAttribute("ws-template");bw=bv.getAttribute("ws-replace");bw===null?void 0:(bv.removeAttribute("ws-replace"),bx=bv.parentNode,u.Equals(bx,null)?void 0:(by=a.document.createElement(bv.tagName),by.setAttribute("ws-replace",bw),bx.replaceChild(by,bv)));q.PrepareTemplateStrict(bt,bu,[bv],null);};q.PrepareTemplateStrict=function(bt,bu,bv,bw){var bx,by;function bz(bL){var bN,bO,bP,bQ,bR,bS,bT,bU;function bM(bV){var bW;bW=bL.getAttribute(bV);bW===null?void 0:bL.setAttribute(bV,bW.toLowerCase());}bN=bL.attributes;bO=[];bP=[];bQ=[];for(bR=0,bS=bN.length-1;bR<=bS;bR++){bT=bN.item(bR);_.StartsWith(bT.nodeName,"ws-on")&&bT.nodeName!=="ws-onafterrender"&&bT.nodeName!=="ws-on"?(bO.push(bT.nodeName),bP.push(_9.string(bT.nodeName,{$:1,$0:"ws-on".length},null)+":"+bT.nodeValue.toLowerCase())):!_.StartsWith(bT.nodeName,"ws-")&&(new a.RegExp(B.TextHoleRE())).test(bT.nodeValue)?(bT.nodeValue=(bU=new a.RegExp(B.TextHoleRE(),"g"),bT.nodeValue.replace(bU,function(bV,bW){return"${"+bW.toLowerCase()+"}";})),bQ.push(bT.nodeName)):void 0;}!(bP.length==0)?bL.setAttribute("ws-on",_.concat(" ",bP)):void 0;!(bQ.length==0)?bL.setAttribute("ws-attr-holes",_.concat(" ",bQ)):void 0;bM("ws-hole");bM("ws-replace");bM("ws-attr");bM("ws-onafterrender");bM("ws-var");E.iter(function(bV){bL.removeAttribute(bV);},bO);}function bA(bL){var bM,bN,bO,bP,bQ,bR;bM=null;bN=0;bP=bL.textContent;bQ=new a.RegExp(B.TextHoleRE(),"g");while(bM=bQ.exec(bP),bM!==null){bL.parentNode.insertBefore(a.document.createTextNode(_9.string(bP,{$:1,$0:bN},{$:1,$0:bQ.lastIndex-E.get(bM,0).length-1})),bL);bN=bQ.lastIndex;bR=a.document.createElement("span");bR.setAttribute("ws-replace",E.get(bM,1).toLowerCase());bL.parentNode.insertBefore(bR,bL);}bQ.lastIndex=0;bL.textContent=_9.string(bP,{$:1,$0:bN},null);}function bB(bL,bM){function bN(bO){v.IterSelector(bL,"["+bO+"]",function(bP){var bQ,bR;bQ=(bR=null,[bM.TryGetValue(bP.getAttribute(bO).toLowerCase(),{get:function(){return bR;},set:function(bS){bR=bS;}}),bR]);bQ[0]?bP.setAttribute(bO,bQ[1]):void 0;});}bN("ws-hole");bN("ws-replace");bN("ws-attr");bN("ws-onafterrender");bN("ws-var");v.IterSelector(bL,"[ws-on]",function(bO){bO.setAttribute("ws-on",_.concat(" ",E.map(function(bP){var bQ,bR,bS;bQ=_.SplitChars(bP,[":"],1);bR=(bS=null,[bM.TryGetValue(E.get(bQ,1),{get:function(){return bS;},set:function(bT){bS=bT;}}),bS]);return bR[0]?E.get(bQ,0)+":"+bR[1]:bP;},_.SplitChars(bO.getAttribute("ws-on"),[" "],1))));});return v.IterSelector(bL,"[ws-attr-holes]",function(bO){var bP,bQ,bR;bP=_.SplitChars(bO.getAttribute("ws-attr-holes"),[" "],1);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)(function(){var bS;function bT(bU,bV){var bW;bW=e.KeyValue(bV);return bU.replace(new a.RegExp("\\${"+bW[0]+"}","ig"),"${"+bW[1]+"}");}bS=E.get(bP,bQ);return bO.setAttribute(bS,(((bp.Curried3(_2.fold))(bT))(bO.getAttribute(bS)))(bM));}());});}function bC(bL,bM){var bN,bO,bP,bQ,bR;bz(bM);bN=bM.nodeName.toLowerCase();bO=bL.querySelector("[ws-attr="+bN+"]");if(u.Equals(bO,null))return bq.warn("Filling non-existent attr hole",bN);else{bO.removeAttribute("ws-attr");for(bP=0,bQ=bM.attributes.length-1;bP<=bQ;bP++){bR=bM.attributes.item(bP);bR.name==="class"&&bO.hasAttribute("class")?bO.setAttribute("class",bO.getAttribute("class")+" "+bR.nodeValue):bO.setAttribute(bR.name,bR.nodeValue);}return;}}function bD(bL,bM){function bN(bO){v.IterSelector(bL,"["+bO+"]",function(bP){if(!bM.Contains(bP.getAttribute(bO)))bP.removeAttribute(bO);});}bN("ws-attr");bN("ws-onafterrender");bN("ws-var");v.IterSelector(bL,"[ws-hole]",function(bO){if(!bM.Contains(bO.getAttribute("ws-hole"))){bO.removeAttribute("ws-hole");while(bO.hasChildNodes())bO.removeChild(bO.lastChild);}});v.IterSelector(bL,"[ws-replace]",function(bO){if(!bM.Contains(bO.getAttribute("ws-replace")))bO.parentNode.removeChild(bO);});v.IterSelector(bL,"[ws-on]",function(bO){bO.setAttribute("ws-on",_.concat(" ",E.filter(function(bP){return bM.Contains(E.get(_.SplitChars(bP,[":"],1),1));},_.SplitChars(bO.getAttribute("ws-on"),[" "],1))));});return v.IterSelector(bL,"[ws-attr-holes]",function(bO){var bP,bQ,bR,bS,bT;bP=_.SplitChars(bO.getAttribute("ws-attr-holes"),[" "],1);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=E.get(bP,bQ);bO.setAttribute(bS,(bT=new a.RegExp(B.TextHoleRE(),"g"),bO.getAttribute(bS).replace(bT,function(bU,bV){return bM.Contains(bV)?bU:"";})));}});}function bE(bL,bM){var bN;bN=bL.querySelector("[ws-replace]");return u.Equals(bN,null)?(bq.warn("Filling non-existent text hole",bu),null):(bN.parentNode.replaceChild(new a.Text(bM),bN),{$:1,$0:bN.getAttribute("ws-replace")});}function bF(bL,bM,bN){while(true)if(bL.hasChildNodes())bN=bM.insertBefore(bL.lastChild,bN);else return null;}function bG(bL,bM,bN){var bO,bP,bQ,bR,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc;function bS(cd){}while(true)switch(bL){case 0:bT=_9.string(bM.nodeName,{$:1,$0:3},null).toLowerCase();bU=(bO=bT.indexOf("."),bO===-1?[bt,bT]:[_9.string(bT,null,{$:1,$0:bO-1}),_9.string(bT,{$:1,$0:bO+1},null)]);bV=bU[1];bW=bU[0];if(!B.LoadedTemplates().ContainsKey(bW))return bq.warn("Instantiating non-loaded template",bV);else{bX=B.LoadedTemplates().get_Item(bW);if(!bX.ContainsKey(bV))return bq.warn("Instantiating non-loaded template",bV);else{bY=bX.get_Item(bV);bZ=bY.cloneNode(true);b0=new _3.New$3();b1=new W.New$5();b2=bM.attributes;for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=b2.item(b3).name.toLowerCase();b1.set_Item(b5,(b6=b2.item(b3).nodeValue,b6===""?b5:b6.toLowerCase()));!b0.Add(b5)?bq.warn("Hole mapped twice",b5):void 0;}for(b7=0,b8=bM.childNodes.length-1;b7<=b8;b7++){b9=bM.childNodes[b7];u.Equals(b9.nodeType,n.ELEMENT_NODE)?!b0.Add(b9.nodeName.toLowerCase())?bq.warn("Hole filled twice",bV):void 0:void 0;}b_=bM.childNodes.length===1&&u.Equals(bM.firstChild.nodeType,n.TEXT_NODE);if(b_){bQ=bE(bZ,bM.firstChild.textContent);((function(cd){return function(ce){if(ce!=null)cd(ce.$0);};}((bR=function(cd){return function(ce){return cd.Add(ce);};}(b0),function(cd){return bS(bR(cd));})))(bQ));}bD(bZ,b0);if(!b_){for(b$=0,ca=bM.childNodes.length-1;b$<=ca;b$++){cb=bM.childNodes[b$];u.Equals(cb.nodeType,n.ELEMENT_NODE)?cb.hasAttributes()?bC(bZ,cb):bH(bZ,cb):void 0;}}bB(bZ,b1);(((function(cd){function ce(cf,cg){return bF(cd,cf,cg);}return function(cf){return function(cg){return ce(cf,cg);};};}(bZ))(bM.parentNode))(bM));bM.parentNode.removeChild(bM);return;}}break;case 1:if(bN!==null){cc=bN.nextSibling;if(u.Equals(bN.nodeType,n.TEXT_NODE))bA(bN);else if(u.Equals(bN.nodeType,n.ELEMENT_NODE))bJ(bN);bN=cc;}else return null;break;}}function bH(bL,bM){var bN,bP,bQ;function bO(bR,bS){var bT,bU,bV;if(bP==="title"&&bM.hasChildNodes()){bT=br.parseHTML(bM.textContent);bM.removeChild(bM.firstChild);for(bU=0,bV=bT.length-1;bU<=bV;bU++)bM.appendChild(E.get(bT,bU));}else null;bJ(bM);return bF(bM,bR,bS);}bP=bM.nodeName.toLowerCase();v.IterSelector(bL,"[ws-attr-holes]",function(bR){var bS,bT,bU,bV,bW;bS=_.SplitChars(bR.getAttribute("ws-attr-holes"),[" "],1);for(bT=0,bU=bS.length-1;bT<=bU;bT++){bV=E.get(bS,bT);bR.setAttribute(bV,(bW=new a.RegExp("\\${"+bP+"}","ig"),bR.getAttribute(bV).replace(bW,bM.textContent)));}});bQ=bL.querySelector("[ws-hole="+bP+"]");if(u.Equals(bQ,null)){bN=bL.querySelector("[ws-replace="+bP+"]");return u.Equals(bN,null)?null:(bO(bN.parentNode,bN),void bN.parentNode.removeChild(bN));}else{while(bQ.hasChildNodes())bQ.removeChild(bQ.lastChild);bQ.removeAttribute("ws-hole");return bO(bQ,null);}}function bI(bL){return bG(0,bL);}function bJ(bL){var bM,bN;if(_.StartsWith(bL.nodeName.toLowerCase(),"ws-")&&!bL.hasAttribute("ws-template"))bI(bL);else{bz(bL);bM=bL.getAttribute("ws-template");if(bM===null){bN=bL.getAttribute("ws-children-template");if(bN===null)bK(bL,bL.firstChild);else{bL.removeAttribute("ws-children-template");q.PrepareTemplate(bt,{$:1,$0:bN},function(){return v.ChildrenArray(bL);});while(bL.hasChildNodes())bL.removeChild(bL.lastChild);}}else q.PrepareSingleTemplate(bt,{$:1,$0:bM},bL);}}function bK(bL,bM){return bG(1,bL,bM);}bx=bw!=null&&bw.$==1?bw.$0:q.FakeRoot(bv);by=(bu==null?"":bu.$0).toLowerCase();B.LoadedTemplateFile(bt).set_Item(by,bx);E.length(bv)>0?bK(bx,E.get(bv,0)):void 0;};q.FakeRoot=function(bt){var bu,bv,bw;bu=a.document.createElement("div");for(bv=0,bw=bt.length-1;bv<=bw;bv++)bu.appendChild(E.get(bt,bv));return bu;};q.New=bp.Ctor(function(bt,bu){this.docNode=bt;this.updates=bu;},q);r=g.AttrProxy=bp.Class({},null,r);r.Create=function(bt,bu){return w.Static(function(bv){v.SetAttr(bv,bt,bu);});};r.Concat=function(bt){var bu;bu=y.ofSeqNonCopying(bt);return y.TreeReduce(w.EmptyAttr(),r.Append,bu);};r.Append=function(bt,bu){return w.AppendTree(bt,bu);};s.Handler=function(bt,bu){return w.Static(function(bv){bv.addEventListener(bt,function(bw){return(bu(bv))(bw);},false);});};t.NewFromSeq=function(bt){var bu,bv,bw;bu={};bv=R.Get(bt);try{while(bv.MoveNext()){bw=bv.Current();bu[bw[0]]=bw[1];}}finally{if("Dispose"in bv)bv.Dispose();}return bu;};u.Equals=function(bt,bu){var bv,bw,bx,by;if(bt===bu)return true;else{bv=typeof bt;if(bv=="object"){if(bt===null||bt===void 0||bu===null||bu===void 0)return false;else if("Equals"in bt)return bt.Equals(bu);else if(bt instanceof a.Array&&bu instanceof a.Array)return u.arrayEquals(bt,bu);else if(bt instanceof a.Date&&bu instanceof a.Date)return u.dateEquals(bt,bu);else{bw=[true];for(var bz in bt)if(function(bA){bw[0]=!bt.hasOwnProperty(bA)||bu.hasOwnProperty(bA)&&u.Equals(bt[bA],bu[bA]);return!bw[0];}(bz))break;if(bw[0]){for(var bA in bu)if(function(bB){bw[0]=!bu.hasOwnProperty(bB)||bt.hasOwnProperty(bB);return!bw[0];}(bA))break;}return bw[0];}}else return bv=="function"&&("$Func"in bt?bt.$Func===bu.$Func&&bt.$Target===bu.$Target:"$Invokes"in bt&&"$Invokes"in bu&&u.arrayEquals(bt.$Invokes,bu.$Invokes));}};u.arrayEquals=function(bt,bu){var bv,bw;if(E.length(bt)===E.length(bu)){bv=true;bw=0;while(bv&&bw<E.length(bt)){!u.Equals(E.get(bt,bw),E.get(bu,bw))?bv=false:void 0;bw=bw+1;}return bv;}else return false;};u.dateEquals=function(bt,bu){return bt.getTime()===bu.getTime();};u.Hash=function(bt){var bu;bu=typeof bt;return bu=="function"?0:bu=="boolean"?bt?1:0:bu=="number"?bt:bu=="string"?u.hashString(bt):bu=="object"?bt==null?0:bt instanceof a.Array?u.hashArray(bt):u.hashObject(bt):0;};u.hashString=function(bt){var bu,bv,bw;if(bt===null)return 0;else{bu=5381;for(bv=0,bw=bt.length-1;bv<=bw;bv++)bu=u.hashMix(bu,bt[bv].charCodeAt());return bu;}};u.hashArray=function(bt){var bu,bv,bw;bu=-34948909;for(bv=0,bw=E.length(bt)-1;bv<=bw;bv++)bu=u.hashMix(bu,u.Hash(E.get(bt,bv)));return bu;};u.hashObject=function(bt){var bu,bv;if("GetHashCode"in bt)return bt.GetHashCode();else{bu=[0];for(var bw in bt)if(function(bx){bu[0]=u.hashMix(u.hashMix(bu[0],u.hashString(bx)),u.Hash(bt[bx]));return false;}(bw))break;return bu[0];}};u.Compare=function(bt,bu){var bv,bw,bx,by,bz,bA;if(bt===bu)return 0;else{bw=typeof bt;switch(bw=="function"?1:bw=="boolean"?2:bw=="number"?2:bw=="string"?2:bw=="object"?3:0){case 0:return typeof bu=="undefined"?0:-1;break;case 1:return e.FailWith("Cannot compare function values.");break;case 2:return bt<bu?-1:1;break;case 3:if(bt===null)bx=-1;else if(bu===null)bx=1;else if("CompareTo"in bt)bx=bt.CompareTo(bu);else if("CompareTo0"in bt)bx=bt.CompareTo0(bu);else if(bt instanceof a.Array&&bu instanceof a.Array)bx=u.compareArrays(bt,bu);else if(bt instanceof a.Date&&bu instanceof a.Date)bx=u.compareDates(bt,bu);else{by=[0];for(var bB in bt)if(function(bC){return!bt.hasOwnProperty(bC)?false:!bu.hasOwnProperty(bC)?(by[0]=1,true):(by[0]=u.Compare(bt[bC],bu[bC]),by[0]!==0);}(bB))break;if(by[0]===0){for(var bC in bu)if(function(bD){return!bu.hasOwnProperty(bD)?false:!bt.hasOwnProperty(bD)&&(by[0]=-1,true);}(bC))break;}bx=by[0];}return bx;break;}}};u.hashMix=function(bt,bu){return(bt<<5)+bt+bu;};u.compareArrays=function(bt,bu){var bv,bw;if(E.length(bt)<E.length(bu))return -1;else if(E.length(bt)>E.length(bu))return 1;else{bv=0;bw=0;while(bv===0&&bw<E.length(bt)){bv=u.Compare(E.get(bt,bw),E.get(bu,bw));bw=bw+1;}return bv;}};u.compareDates=function(bt,bu){return u.Compare(bt.getTime(),bu.getTime());};v.CreateElement=function(bt){return v.Doc().createElement(bt);};v.SetAttr=function(bt,bu,bv){bt.setAttribute(bu,bv);};v.Doc=function(){A.$cctor();return A.Doc;};v.CreateText=function(bt){return v.Doc().createTextNode(bt);};v.ChildrenArray=function(bt){var bu,bv,bw;bu=[];for(bv=0,bw=bt.childNodes.length-1;bv<=bw;bv++)bu.push(bt.childNodes[bv]);return bu;};v.InsertAt=function(bt,bu,bv){var bw;if(!(bv.parentNode===bt&&bu===(bw=bv.nextSibling,u.Equals(bw,null)?null:bw)))bt.insertBefore(bv,bu);};v.IterSelector=function(bt,bu,bv){var bw,bx,by;bw=bt.querySelectorAll(bu);for(bx=0,by=bw.length-1;bx<=by;bx++)bv(bw[bx]);};v.RemoveNode=function(bt,bu){if(bu.parentNode===bt)bt.removeChild(bu);};w.Static=function(bt){return new r({$:3,$0:bt});};w.EmptyAttr=function(){S.$cctor();return S.EmptyAttr;};w.AppendTree=function(bt,bu){var bv;return bt===null?bu:bu===null?bt:(bv=new r({$:2,$0:bt,$1:bu}),(w.SetFlags(bv,w.Flags(bt)|w.Flags(bu)),bv));};w.Updates=function(bt){return y.MapTreeReduce(function(bu){return bu.NChanged();},x.Const(),x.Map2Unit,bt.DynNodes);};w.SetFlags=function(bt,bu){bt.flags=bu;};w.Flags=function(bt){return bt!==null&&bt.hasOwnProperty("flags")?bt.flags:0;};w.Insert=function(bt,bu){var bv,bw,bx;function by(bz){if(!(bz===null))if(bz!=null&&bz.$==1)bv.push(bz.$0);else if(bz!=null&&bz.$==2){by(bz.$0);by(bz.$1);}else if(bz!=null&&bz.$==3)bz.$0(bt);else if(bz!=null&&bz.$==4)bw.push(bz.$0);}bv=[];bw=[];by(bu);bx=bv.slice(0);return Q.New(bt,w.Flags(bu),bx,bw.length===0?null:{$:1,$0:function(bz){_2.iter(function(bA){bA(bz);},bw);}});};w.HasChangeAnim=function(bt){var bu;bu=4;return(bt.DynFlags&bu)===bu;};w.GetChangeAnim=function(bt){return w.GetAnim(bt,function(bu,bv){return bu.NGetChangeAnim(bv);});};w.HasEnterAnim=function(bt){var bu;bu=1;return(bt.DynFlags&bu)===bu;};w.GetEnterAnim=function(bt){return w.GetAnim(bt,function(bu,bv){return bu.NGetEnterAnim(bv);});};w.HasExitAnim=function(bt){var bu;bu=2;return(bt.DynFlags&bu)===bu;};w.GetExitAnim=function(bt){return w.GetAnim(bt,function(bu,bv){return bu.NGetExitAnim(bv);});};w.GetAnim=function(bt,bu){return K.Concat(E.map(function(bv){return bu(bv,bt.DynElem);},bt.DynNodes));};w.Sync=function(bt,bu){E.iter(function(bv){bv.NSync(bt);},bu.DynNodes);};x=g.View=bp.Class({},null,x);y.ofSeqNonCopying=function(bt){var bu,bv;if(bt instanceof a.Array)return bt;else if(bt instanceof G)return E.ofList(bt);else if(bt===null)return[];else{bu=[];bv=R.Get(bt);try{while(bv.MoveNext())bu.push(bv.Current());return bu;}finally{if("Dispose"in bv)bv.Dispose();}}};y.TreeReduce=function(bt,bu,bv){var bw;function bx(by,bz){var bA,bB;return bz<=0?bt:bz===1&&(by>=0&&by<bw)?E.get(bv,by):(bB=bz/2>>0,bu(bx(by,bB),bx(by+bB,bz-bB)));}bw=E.length(bv);return bx(0,bw);};y.MapTreeReduce=function(bt,bu,bv,bw){var bx;function by(bz,bA){var bB,bC;return bA<=0?bu:bA===1&&(bz>=0&&bz<bx)?bt(E.get(bw,bz)):(bC=bA/2>>0,bv(by(bz,bC),by(bz+bC,bA-bC)));}bx=E.length(bw);return by(0,bx);};z=g.Elt=bp.Class({},q,z);z.New=function(bt,bu,bv){var bw,bx;bw=B.CreateElemNode(bt,bu,bv.docNode);bx=I.Create(bv.updates);return new z.New$1({$:1,$0:bw},x.Map2Unit(w.Updates(bw.Attr),bx.v),bt,bx);};z.New$1=bp.Ctor(function(bt,bu,bv,bw){q.New.call(this,bt,bu);this.docNode$1=bt;this.updates$1=bu;this.elt=bv;this.rvUpdates=bw;},z);x.Const=function(bt){var bu;bu=J.New({$:0,$0:bt});return function(){return bu;};};x.Map2Unit=function(bt,bu){return x.CreateLazy(function(){return J.Map2Unit(bt(),bu());});};x.Sink=function(bt,bu){function bv(){J.WhenRun(bu(),bt,function(){_5.scheduler().Fork(bv);});}_5.scheduler().Fork(bv);};x.CreateLazy=function(bt){var bu;bu={c:null,o:bt};return function(){var bv,bw;bv=bu.c;return bv===null?(bv=bu.o(),bu.c=bv,(bw=bv.s,bw!=null&&bw.$==0)?bu.o=null:J.WhenObsoleteRun(bv,function(){bu.c=null;}),bv):bv;};};A.$cctor=function(){A.$cctor=a.ignore;A.Doc=a.document;};B.LinkElement=function(bt,bu){B.InsertDoc(bt,bu,null);};B.CreateElemNode=function(bt,bu,bv){var bw;B.LinkElement(bt,bv);bw=w.Insert(bt,bu);return C.New(bw,bv,null,bt,T.Int(),bp.GetOptional(bw.OnAfterRender));};B.LocalTemplatesLoaded=function(){U.$cctor();return U.LocalTemplatesLoaded;};B.set_LocalTemplatesLoaded=function(bt){U.$cctor();U.LocalTemplatesLoaded=bt;};B.InsertDoc=function(bt,bu,bv){var bw;return bu!=null&&bu.$==1?B.InsertNode(bt,bu.$0.El,bv):bu!=null&&bu.$==2?(bw=bu.$0,(bw.Dirty=false,B.InsertDoc(bt,bw.Current,bv))):bu==null?bv:bu!=null&&bu.$==4?B.InsertNode(bt,bu.$0.Text,bv):bu!=null&&bu.$==5?B.InsertNode(bt,bu.$0,bv):bu!=null&&bu.$==6?E.foldBack(function(bx,by){return bx.constructor===H?B.InsertDoc(bt,bx,by):B.InsertNode(bt,bx,by);},bu.$0.Els,bv):B.InsertDoc(bt,bu.$0,B.InsertDoc(bt,bu.$1,bv));};B.CreateRunState=function(bt,bu){return Y.New(Z.get_Empty(),B.CreateElemNode(bt,w.EmptyAttr(),bu));};B.PerformAnimatedUpdate=function(bt,bu,bv){var bw;return K.get_UseAnimations()?(bw=null,_5.Delay(function(){var bx,by,bz;bx=Z.FindAll(bv);by=B.ComputeChangeAnim(bu,bx);bz=B.ComputeEnterAnim(bu,bx);return _5.Bind(K.Play(K.Append(by,B.ComputeExitAnim(bu,bx))),function(){return _5.Bind(B.SyncElemNodesNextFrame(bt,bu),function(){return _5.Bind(K.Play(bz),function(){bu.PreviousNodes=bx;return _5.Return(null);});});});})):B.SyncElemNodesNextFrame(bt,bu);};B.PerformSyncUpdate=function(bt,bu,bv){var bw;bw=Z.FindAll(bv);B.SyncElemNode(bt,bu.Top);bu.PreviousNodes=bw;};B.LoadedTemplateFile=function(bt){var bu,bv,bw;bu=(bv=null,[B.LoadedTemplates().TryGetValue(bt,{get:function(){return bv;},set:function(bx){bv=bx;}}),bv]);return bu[0]?bu[1]:(bw=new W.New$5(),(B.LoadedTemplates().set_Item(bt,bw),bw));};B.LoadedTemplates=function(){U.$cctor();return U.LoadedTemplates;};B.InsertNode=function(bt,bu,bv){v.InsertAt(bt,bv,bu);return bu;};B.ComputeChangeAnim=function(bt,bu){var bv;function bw(bx){return w.HasChangeAnim(bx.Attr);}bv=function(bx){return Z.Filter(bw,bx);};return K.Concat(E.map(function(bx){return w.GetChangeAnim(bx.Attr);},Z.ToArray(Z.Intersect(bv(bt.PreviousNodes),bv(bu)))));};B.ComputeEnterAnim=function(bt,bu){return K.Concat(E.map(function(bv){return w.GetEnterAnim(bv.Attr);},Z.ToArray(Z.Except(bt.PreviousNodes,Z.Filter(function(bv){return w.HasEnterAnim(bv.Attr);},bu)))));};B.ComputeExitAnim=function(bt,bu){return K.Concat(E.map(function(bv){return w.GetExitAnim(bv.Attr);},Z.ToArray(Z.Except(bu,Z.Filter(function(bv){return w.HasExitAnim(bv.Attr);},bt.PreviousNodes)))));};B.SyncElemNodesNextFrame=function(bt,bu){function bv(bw){a.requestAnimationFrame(function(){B.SyncElemNode(bt,bu.Top);bw();});}return M.BatchUpdatesEnabled()?_5.FromContinuations(function(bw,bx,by){return bv.apply(null,[bw,bx,by]);}):(B.SyncElemNode(bt,bu.Top),_5.Return(null));};B.SyncElemNode=function(bt,bu){!bt?B.SyncElement(bu):void 0;B.Sync(bu.Children);B.AfterRender(bu);};B.SyncElement=function(bt){function bu(bv){function bw(bx){var by,bz;return bx!=null&&bx.$==0?bw(bx.$0)||bw(bx.$1):bx!=null&&bx.$==2?(by=bx.$0,by.Dirty||bw(by.Current)):bx!=null&&bx.$==6&&(bz=bx.$0,bz.Dirty||E.exists(bu,bz.Holes));}return bw(bv.Children);}w.Sync(bt.El,bt.Attr);bu(bt)?B.DoSyncElement(bt):void 0;};B.Sync=function(bt){var bu,bv;if(bt!=null&&bt.$==1)B.SyncElemNode(false,bt.$0);else if(bt!=null&&bt.$==2)B.Sync(bt.$0.Current);else if(bt==null);else if(bt!=null&&bt.$==5);else if(bt!=null&&bt.$==4){bu=bt.$0;bu.Dirty?(bu.Text.nodeValue=bu.Value,bu.Dirty=false):void 0;}else if(bt!=null&&bt.$==6){bv=bt.$0;E.iter(function(bw){B.SyncElemNode(false,bw);},bv.Holes);E.iter(function(bw){w.Sync(bw[0],bw[1]);},bv.Attrs);B.AfterRender(bv);}else{B.Sync(bt.$0);B.Sync(bt.$1);}};B.AfterRender=function(bt){var bu;bu=bp.GetOptional(bt.Render);bu!=null&&bu.$==1?(bu.$0(bt.El),bp.SetOptional(bt,"Render",null)):void 0;};B.TextHoleRE=function(){U.$cctor();return U.TextHoleRE;};B.DoSyncElement=function(bt){var bu,bv,bw;function bx(by,bz){var bA,bB;return by!=null&&by.$==1?by.$0.El:by!=null&&by.$==2?(bA=by.$0,bA.Dirty?(bA.Dirty=false,B.InsertDoc(bu,bA.Current,bz)):bx(bA.Current,bz)):by==null?bz:by!=null&&by.$==4?by.$0.Text:by!=null&&by.$==5?by.$0:by!=null&&by.$==6?(bB=by.$0,(bB.Dirty?bB.Dirty=false:void 0,E.foldBack(function(bC,bD){return bC.constructor===H?bx(bC,bD):bC;},bB.Els,bz))):bx(by.$0,bx(by.$1,bz));}bu=bt.El;bg.Iter((bv=bt.El,function(by){v.RemoveNode(bv,by);}),bg.Except(bg.DocChildren(bt),bg.Children(bt.El,bp.GetOptional(bt.Delimiters))));bx(bt.Children,(bw=bp.GetOptional(bt.Delimiters),bw!=null&&bw.$==1?bw.$0[1]:null));};C=g.DocElemNode=bp.Class({Equals:function(bt){return this.ElKey===bt.ElKey;},GetHashCode:function(){return this.ElKey;}},null,C);C.New=function(bt,bu,bv,bw,bx,by){var bz;return new C((bz={Attr:bt,Children:bu,El:bw,ElKey:bx},(bp.SetOptional(bz,"Delimiters",bv),bp.SetOptional(bz,"Render",by),bz)));};E.get=function(bt,bu){E.checkBounds(bt,bu);return bt[bu];};E.length=function(bt){return bt.dims===2?bt.length*bt.length:bt.length;};E.checkBounds=function(bt,bu){if(bu<0||bu>=bt.length)e.FailWith("Index was outside the bounds of the array.");};E.set=function(bt,bu,bv){E.checkBounds(bt,bu);bt[bu]=bv;};G=F.T=bp.Class({GetEnumerator:function(){return new _1.New(this,null,function(bt){var bu;bu=bt.s;return bu.$==0?false:(bt.c=bu.$0,bt.s=bu.$1,true);},void 0);},GetEnumerator0:function(){return R.Get(this);}},null,G);E.ofList=function(bt){var bu,bv;bv=[];bu=bt;while(!(bu.$==0)){bv.push(F.head(bu));bu=F.tail(bu);}return bv;};E.foldBack=function(bt,bu,bv){var bw,bx,by,bz,bA;bw=bv;by=bu.length;for(bz=1,bA=by;bz<=bA;bz++)bw=bt(bu[by-bz],bw);return bw;};E.iter=function(bt,bu){var bv,bw;for(bv=0,bw=bu.length-1;bv<=bw;bv++)bt(bu[bv]);};E.map=function(bt,bu){var bv,bw,bx;bv=new a.Array(bu.length);for(bw=0,bx=bu.length-1;bw<=bx;bw++)bv[bw]=bt(bu[bw]);return bv;};E.tryPick=function(bt,bu){var bv,bw,bx;bv=null;bw=0;while(bw<bu.length&&bv==null){bx=bt(bu[bw]);bx!=null&&bx.$==1?bv=bx:void 0;bw=bw+1;}return bv;};E.tryFindIndex=function(bt,bu){var bv,bw;bv=null;bw=0;while(bw<bu.length&&bv==null){bt(bu[bw])?bv={$:1,$0:bw}:void 0;bw=bw+1;}return bv;};E.exists=function(bt,bu){var bv,bw,bx,by;bv=false;bw=0;by=E.length(bu);while(!bv&&bw<by)if(bt(bu[bw]))bv=true;else bw=bw+1;return bv;};E.filter=function(bt,bu){var bv,bw,bx;bv=[];for(bw=0,bx=bu.length-1;bw<=bx;bw++)if(bt(bu[bw]))bv.push(bu[bw]);return bv;};E.choose=function(bt,bu){var bv,bw,bx,by;bv=[];for(bw=0,bx=bu.length-1;bw<=bx;bw++){by=bt(bu[bw]);by==null?void 0:bv.push(by.$0);}return bv;};E.create=function(bt,bu){var bv,bw,bx;bv=new a.Array(bt);for(bw=0,bx=bt-1;bw<=bx;bw++)bv[bw]=bu;return bv;};E.concat=function(bt){return a.Array.prototype.concat.apply([],E.ofSeq(bt));};E.ofSeq=function(bt){var bu,bv;if(bt instanceof a.Array)return bt.slice();else if(bt instanceof G)return E.ofList(bt);else{bu=[];bv=R.Get(bt);try{while(bv.MoveNext())bu.push(bv.Current());return bu;}finally{if("Dispose"in bv)bv.Dispose();}}};E.pick=function(bt,bu){var bv;bv=E.tryPick(bt,bu);return bv==null?e.FailWith("KeyNotFoundException"):bv.$0;};E.init=function(bt,bu){var bv,bw,bx;bt<0?e.FailWith("Negative size given."):null;bv=new a.Array(bt);for(bw=0,bx=bt-1;bw<=bx;bw++)bv[bw]=bu(bw);return bv;};E.forall=function(bt,bu){var bv,bw,bx,by;bv=true;bw=0;by=E.length(bu);while(bv&&bw<by)if(bt(bu[bw]))bw=bw+1;else bv=false;return bv;};I=g.Updates=bp.Class({},null,I);I.Create=function(bt){var bu;bu=null;bu=I.New(bt,null,function(){var bv;bv=bu.s;return bv===null?(bv=J.Copy(bu.c()),bu.s=bv,J.WhenObsoleteRun(bv,function(){bu.s=null;}),bv):bv;});return bu;};I.New=function(bt,bu,bv){return new I({c:bt,s:bu,v:bv});};J.Map2Unit=function(bt,bu){var bv,bw,bx;function by(){var bz,bA,bB;if(!(bz=bx.s,bz!=null&&bz.$==0||bz!=null&&bz.$==2)){bA=J.ValueAndForever(bt);bB=J.ValueAndForever(bu);bA!=null&&bA.$==1?bB!=null&&bB.$==1?bA.$0[1]&&bB.$0[1]?J.MarkForever(bx,null):J.MarkReady(bx,null):void 0:void 0;}}bv=bt.s;bw=bu.s;return bv!=null&&bv.$==0?bw!=null&&bw.$==0?J.New({$:0,$0:null}):bu:bw!=null&&bw.$==0?bt:(bx=J.New({$:3,$0:[],$1:[]}),(J.When(bt,by,bx),J.When(bu,by,bx),bx));};J.Copy=function(bt){var bu,bv,bw;bu=bt.s;return bu==null?bt:bu!=null&&bu.$==2?(bv=J.New({$:2,$0:bu.$0,$1:[]}),(J.WhenObsolete(bt,bv),bv)):bu!=null&&bu.$==3?(bw=J.New({$:3,$0:[],$1:[]}),(J.When(bt,function(bx){J.MarkDone(bw,bt,bx);},bw),bw)):bt;};J.WhenObsoleteRun=function(bt,bu){var bv;bv=bt.s;bv==null?bu():bv!=null&&bv.$==2?bv.$1.push(bu):bv!=null&&bv.$==3?bv.$1.push(bu):void 0;};J.WhenRun=function(bt,bu,bv){var bw;bw=bt.s;bw==null?bv():bw!=null&&bw.$==2?(bw.$1.push(bv),bu(bw.$0)):bw!=null&&bw.$==3?(bw.$0.push(bu),bw.$1.push(bv)):bu(bw.$0);};J.ValueAndForever=function(bt){var bu;bu=bt.s;return bu!=null&&bu.$==0?{$:1,$0:[bu.$0,true]}:bu!=null&&bu.$==2?{$:1,$0:[bu.$0,false]}:null;};J.MarkForever=function(bt,bu){var bv,bw,bx,by;bv=bt.s;if(bv!=null&&bv.$==3){bt.s={$:0,$0:bu};bw=bv.$0;for(bx=0,by=E.length(bw)-1;bx<=by;bx++)(E.get(bw,bx))(bu);}else void 0;};J.MarkReady=function(bt,bu){var bv,bw,bx,by;bv=bt.s;if(bv!=null&&bv.$==3){bt.s={$:2,$0:bu,$1:bv.$1};bw=bv.$0;for(bx=0,by=E.length(bw)-1;bx<=by;bx++)(E.get(bw,bx))(bu);}else void 0;};J.When=function(bt,bu,bv){var bw;bw=bt.s;bw==null?J.Obsolete(bv):bw!=null&&bw.$==2?(J.EnqueueSafe(bw.$1,bv),bu(bw.$0)):bw!=null&&bw.$==3?(bw.$0.push(bu),J.EnqueueSafe(bw.$1,bv)):bu(bw.$0);};J.WhenObsolete=function(bt,bu){var bv;bv=bt.s;bv==null?J.Obsolete(bu):bv!=null&&bv.$==2?J.EnqueueSafe(bv.$1,bu):bv!=null&&bv.$==3?J.EnqueueSafe(bv.$1,bu):void 0;};J.MarkDone=function(bt,bu,bv){var bw;if(bw=bu.s,bw!=null&&bw.$==0)J.MarkForever(bt,bv);else J.MarkReady(bt,bv);};J.EnqueueSafe=function(bt,bu){var bv,bw,bx,by;bt.push(bu);if(bt.length%20===0){bv=bt.slice(0);bh.Clear(bt);for(bw=0,bx=E.length(bv)-1;bw<=bx;bw++){by=E.get(bv,bw);typeof by=="object"?function(bz){if(bz.s)bt.push(bz);}(by):function(bz){bt.push(bz);}(by);}}else void 0;};K.get_UseAnimations=function(){return _0.UseAnimations();};K.Play=function(bt){var bu;bu=null;return _5.Delay(function(){return _5.Bind(K.Run(a.ignore,_0.Actions(bt)),function(){_0.Finalize(bt);return _5.Return(null);});});};K.Append=function(bt,bu){return{$:0,$0:_6.Append(bt.$0,bu.$0)};};K.Concat=function(bt){return{$:0,$0:_6.Concat(_2.map(_0.List,bt))};};K.Run=function(bt,bu){var bv;function bw(bx){function by(bz,bA){var bB;bB=bA-bz;bu.Compute(bB);bt();return bB<=bv?void a.requestAnimationFrame(function(bC){by(bz,bC);}):bx();}a.requestAnimationFrame(function(bz){by(bz,bz);});}bv=bu.Duration;return bv===0?_5.Zero():_5.FromContinuations(function(bx,by,bz){return bw.apply(null,[bx,by,bz]);});};M.BatchUpdatesEnabled=function(){U.$cctor();return U.BatchUpdatesEnabled;};O.StartProcessor=function(bt){var bu;function bv(){var bw;bw=null;return _5.Delay(function(){return _5.Bind(bt,function(){var bx;bx=bu[0];return bx===1?(bu[0]=0,_5.Zero()):bx===2?(bu[0]=1,bv()):_5.Zero();});});}bu=[0];return function(){var bw;bw=bu[0];bw===0?(bu[0]=1,_5.Start(bv(),null)):bw===1?bu[0]=2:void 0;};};Q.New=function(bt,bu,bv,bw){var bx;bx={DynElem:bt,DynFlags:bu,DynNodes:bv};bp.SetOptional(bx,"OnAfterRender",bw);return bx;};F.head=function(bt){return bt.$==1?bt.$0:F.listEmpty();};F.tail=function(bt){return bt.$==1?bt.$1:F.listEmpty();};F.listEmpty=function(){return e.FailWith("The input list was empty.");};R.Get=function(bt){return bt instanceof a.Array?R.ArrayEnumerator(bt):u.Equals(typeof bt,"string")?R.StringEnumerator(bt):bt.GetEnumerator();};R.ArrayEnumerator=function(bt){return new _1.New(0,null,function(bu){var bv;bv=bu.s;return bv<E.length(bt)&&(bu.c=E.get(bt,bv),bu.s=bv+1,true);},void 0);};R.StringEnumerator=function(bt){return new _1.New(0,null,function(bu){var bv;bv=bu.s;return bv<bt.length&&(bu.c=bt[bv],bu.s=bv+1,true);},void 0);};R.Get0=function(bt){return bt instanceof a.Array?R.ArrayEnumerator(bt):u.Equals(typeof bt,"string")?R.StringEnumerator(bt):"GetEnumerator0"in bt?bt.GetEnumerator0():bt.GetEnumerator();};S.$cctor=function(){S.$cctor=a.ignore;S.EmptyAttr=null;};T.Int=function(){T.set_counter(T.counter()+1);return T.counter();};T.set_counter=function(bt){_7.$cctor();_7.counter=bt;};T.counter=function(){_7.$cctor();return _7.counter;};U.$cctor=function(){U.$cctor=a.ignore;U.BatchUpdatesEnabled=true;U.LoadedTemplates=new W.New$5();U.LocalTemplatesLoaded=false;U.TextHoleRE="\\${([^}]+)}";};W=V.Dictionary=bp.Class({set_Item:function(bt,bu){this.set(bt,bu);},TryGetValue:function(bt,bu){var bv,bw,bx;bv=this;bw=this.data[this.hash(bt)];return bw&&(bx=E.tryPick(function(by){var bz;bz=e.KeyValue(by);return bv.equals.apply(null,[bz[0],bt])?{$:1,$0:bz[1]}:null;},bw),bx!=null&&bx.$==1&&(bu.set(bx.$0),true));},set:function(bt,bu){var bv,bw,bx,by;bv=this;bw=this.hash(bt);bx=this.data[bw];bx?(by=E.tryFindIndex(function(bz){return bv.equals.apply(null,[(e.KeyValue(bz))[0],bt]);},bx),by==null?(this.count=this.count+1,bx.push({K:bt,V:bu})):bx[by.$0]={K:bt,V:bu}):(this.count=this.count+1,this.data[bw]=new a.Array({K:bt,V:bu}));},ContainsKey:function(bt){var bu,bv;bu=this;bv=this.data[this.hash(bt)];return bv&&E.exists(function(bw){return bu.equals.apply(null,[(e.KeyValue(bw))[0],bt]);},bv);},get_Item:function(bt){return this.get(bt);},get:function(bt){var bu,bv;bu=this;bv=this.data[this.hash(bt)];return bv?E.pick(function(bw){var bx;bx=e.KeyValue(bw);return bu.equals.apply(null,[bx[0],bt])?{$:1,$0:bx[1]}:null;},bv):_8.notPresent();},GetEnumerator:function(){return R.Get0(this);},GetEnumerator0:function(){return R.Get0(E.concat(k.GetFieldValues(this.data)));}},f,W);W.New$5=bp.Ctor(function(){W.New$6.call(this,[],u.Equals,u.Hash);},W);W.New$6=bp.Ctor(function(bt,bu,bv){var bw,bx;this.equals=bu;this.hash=bv;this.count=0;this.data=[];bw=R.Get(bt);try{while(bw.MoveNext()){bx=bw.Current();this.set(bx.K,bx.V);}}finally{if("Dispose"in bw)bw.Dispose();}},W);Y.New=function(bt,bu){return{PreviousNodes:bt,Top:bu};};Z.get_Empty=function(){return{$:0,$0:new _3.New$3()};};Z.FindAll=function(bt){var bu;function bv(bx){if(bx!=null&&bx.$==0){bv(bx.$0);bv(bx.$1);}else if(bx!=null&&bx.$==1)bw(bx.$0);else if(bx!=null&&bx.$==2)bv(bx.$0.Current);else if(bx!=null&&bx.$==6)E.iter(bw,bx.$0.Holes);}function bw(bx){bu.push(bx);bv(bx.Children);}bu=[];bv(bt);return{$:0,$0:new _3.New$2(bu)};};Z.Filter=function(bt,bu){return{$:0,$0:bd.Filter(bt,bu.$0)};};Z.Intersect=function(bt,bu){return{$:0,$0:bd.Intersect(bt.$0,bu.$0)};};Z.ToArray=function(bt){return bd.ToArray(bt.$0);};Z.Except=function(bt,bu){return{$:0,$0:bd.Except(bt.$0,bu.$0)};};_0.UseAnimations=function(){_4.$cctor();return _4.UseAnimations;};_0.Actions=function(bt){return _0.ConcatActions(E.choose(function(bu){return bu.$==1?{$:1,$0:bu.$0}:null;},_6.ToArray(bt.$0)));};_0.Finalize=function(bt){E.iter(function(bu){if(bu.$==0)bu.$0();},_6.ToArray(bt.$0));};_0.List=function(bt){return bt.$0;};_0.ConcatActions=function(bt){var bu,bv,bw,bx;bu=y.ofSeqNonCopying(bt);bv=E.length(bu);return bv===0?_0.Const():bv===1?E.get(bu,0):(bw=_2.max(_2.map(function(by){return by.Duration;},bu)),(bx=E.map(function(by){return _0.Prolong(bw,by);},bu),_0.Def(bw,function(by){E.iter(function(bz){bz.Compute(by);},bx);})));};_0.Const=function(bt){return _0.Def(0,function(){return bt;});};_0.Prolong=function(bt,bu){var bv,bw,bx;bv=bu.Compute;bw=bu.Duration;bx=bl.Create(function(){return bu.Compute(bu.Duration);});return{Compute:function(by){return by>=bw?bx.f():bv(by);},Duration:bt};};_0.Def=function(bt,bu){return{Compute:bu,Duration:bt};};_1=R.T=bp.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,_1);_1.New=bp.Ctor(function(bt,bu,bv,bw){this.s=bt;this.c=bu;this.n=bv;this.d=bw;},_1);J.Obsolete=function(bt){var bu,bv,bw,bx,by;bv=bt.s;if(bv==null||(bv!=null&&bv.$==2?(bu=bv.$1,false):bv!=null&&bv.$==3?(bu=bv.$1,false):true))void 0;else{bt.s=null;for(bw=0,bx=E.length(bu)-1;bw<=bx;bw++){by=E.get(bu,bw);typeof by=="object"?function(bz){J.Obsolete(bz);}(by):by();}}};J.New=function(bt){return{s:bt};};_2.iter=function(bt,bu){var bv;bv=R.Get(bu);try{while(bv.MoveNext())bt(bv.Current());}finally{if("Dispose"in bv)bv.Dispose();}};_2.fold=function(bt,bu,bv){var bw,bx;bw=bu;bx=R.Get(bv);try{while(bx.MoveNext())bw=bt(bw,bx.Current());return bw;}finally{if("Dispose"in bx)bx.Dispose();}};_2.map=function(bt,bu){return{GetEnumerator:function(){var bv;bv=R.Get(bu);return new _1.New(null,null,function(bw){return bv.MoveNext()&&(bw.c=bt(bv.Current()),true);},function(){bv.Dispose();});}};};_2.max=function(bt){var bu,bv,bw;bu=R.Get(bt);try{if(!bu.MoveNext())_2.seqEmpty();bv=bu.Current();while(bu.MoveNext()){bw=bu.Current();u.Compare(bw,bv)===1?bv=bw:void 0;}return bv;}finally{if("Dispose"in bu)bu.Dispose();}};_2.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};_3=V.HashSet=bp.Class({Contains:function(bt){var bu;bu=this.data[this.hash(bt)];return bu==null?false:this.arrContains(bt,bu);},Add:function(bt){return this.add(bt);},arrContains:function(bt,bu){var bv,bw,bx,by;bv=true;bw=0;by=bu.length;while(bv&&bw<by)if(this.equals.apply(null,[bu[bw],bt]))bv=false;else bw=bw+1;return!bv;},add:function(bt){var bu,bv;bu=this.hash(bt);bv=this.data[bu];return bv==null?(this.data[bu]=[bt],this.count=this.count+1,true):this.arrContains(bt,bv)?false:(bv.push(bt),this.count=this.count+1,true);},IntersectWith:function(bt){var bu,bv,bw,bx,by;bu=new _3.New$4(bt,this.equals,this.hash);bv=bj.concat(this.data);for(bw=0,bx=bv.length-1;bw<=bx;bw++){by=bv[bw];!bu.Contains(by)?this.Remove(by):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bt){var bu,bv,bw,bx;bu=0;bv=bj.concat(this.data);for(bw=0,bx=bv.length-1;bw<=bx;bw++)E.set(bt,bw,bv[bw]);},ExceptWith:function(bt){var bu;bu=R.Get(bt);try{while(bu.MoveNext())this.Remove(bu.Current());}finally{if("Dispose"in bu)bu.Dispose();}},Remove:function(bt){var bu;bu=this.data[this.hash(bt)];return bu==null?false:this.arrRemove(bt,bu)&&(this.count=this.count-1,true);},arrRemove:function(bt,bu){var bv,bw,bx,by;bv=true;bw=0;by=bu.length;while(bv&&bw<by)if(this.equals.apply(null,[bu[bw],bt])){bu.splice.apply(bu,[bw,1]);bv=false;}else bw=bw+1;return!bv;},GetEnumerator:function(){return R.Get(bj.concat(this.data));},GetEnumerator0:function(){return R.Get(bj.concat(this.data));}},f,_3);_3.New$3=bp.Ctor(function(){_3.New$4.call(this,[],u.Equals,u.Hash);},_3);_3.New$2=bp.Ctor(function(bt){_3.New$4.call(this,bt,u.Equals,u.Hash);},_3);_3.New$4=bp.Ctor(function(bt,bu,bv){var bw;this.equals=bu;this.hash=bv;this.data=[];this.count=0;bw=R.Get(bt);try{while(bw.MoveNext())this.add(bw.Current());}finally{if("Dispose"in bw)bw.Dispose();}},_3);_4.$cctor=function(){_4.$cctor=a.ignore;_4.CubicInOut=$.Custom(function(bt){var bu;bu=bt*bt;return 3*bu-2*(bu*bt);});_4.UseAnimations=true;};_5.Delay=function(bt){return function(bu){try{(bt(null))(bu);}catch(bv){bu.k({$:1,$0:bv});}};};_5.Bind=function(bt,bu){return _5.checkCancel(function(bv){bt(ba.New(function(bw){var bx;if(bw.$==0){bx=bw.$0;_5.scheduler().Fork(function(){try{(bu(bx))(bv);}catch(by){bv.k({$:1,$0:by});}});}else _5.scheduler().Fork(function(){bv.k(bw);});},bv.ct));});};_5.Zero=function(){bb.$cctor();return bb.Zero;};_5.Start=function(bt,bu){var bv,bw;bv=(bw=(_5.defCTS())[0],bu==null?bw:bu.$0);_5.scheduler().Fork(function(){if(!bv.c)bt(ba.New(function(bx){if(bx.$==1)_5.UncaughtAsyncError(bx.$0);},bv));});};_5.Return=function(bt){return function(bu){bu.k({$:0,$0:bt});};};_5.checkCancel=function(bt){return function(bu){if(bu.ct.c)_5.cancel(bu);else bt(bu);};};_5.defCTS=function(){bb.$cctor();return bb.defCTS;};_5.UncaughtAsyncError=function(bt){bq.log("WebSharper: Uncaught asynchronous exception",bt);};_5.FromContinuations=function(bt){return function(bu){var bv;function bw(bx){if(bv[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bv[0]=true;_5.scheduler().Fork(bx);}}bv=[false];bt(function(bx){bw(function(){bu.k({$:0,$0:bx});});},function(bx){bw(function(){bu.k({$:1,$0:bx});});},function(bx){bw(function(){bu.k({$:2,$0:bx});});});};};_5.cancel=function(bt){bt.k({$:2,$0:new bi.New(bt.ct)});};_5.scheduler=function(){bb.$cctor();return bb.scheduler;};_6.Append=function(bt,bu){return bt.$==0?bu:bu.$==0?bt:{$:2,$0:bt,$1:bu};};_6.Concat=function(bt){var bu;bu=y.ofSeqNonCopying(bt);return y.TreeReduce(_6.Empty(),_6.Append,bu);};_6.ToArray=function(bt){var bu;function bv(bw){if(bw.$==1)bu.push(bw.$0);else if(bw.$==2){bv(bw.$0);bv(bw.$1);}else if(bw.$==3)E.iter(function(bx){bu.push(bx);},bw.$0);}bu=[];bv(bt);return bu.slice(0);};_6.Empty=function(){bk.$cctor();return bk.Empty;};_7.$cctor=function(){_7.$cctor=a.ignore;_7.counter=0;};_8.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};_9.string=function(bt,bu,bv){return bu==null?bv!=null&&bv.$==1?bt.slice(0,bv.$0+1):"":bv==null?bt.slice(bu.$0):bt.slice(bu.$0,bv.$0+1);};_.concat=function(bt,bu){return E.ofSeq(bu).join(bt);};_.StartsWith=function(bt,bu){return bt.substring(0,bu.length)==bu;};_.SplitChars=function(bt,bu,bv){return _.Split(bt,new a.RegExp("["+_.RegexEscape(bu.join(""))+"]"),bv);};_.RegexEscape=function(bt){return bt.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_.Split=function(bt,bu,bv){return bv===1?E.filter(function(bw){return bw!=="";},_.SplitWith(bt,bu)):_.SplitWith(bt,bu);};_.SplitWith=function(bt,bu){return bt.split(bu);};$=g.Easing=bp.Class({},f,$);$.Custom=function(bt){return new $.New(bt);};$.New=bp.Ctor(function(bt){this.transformTime=bt;},$);ba.New=function(bt,bu){return{k:bt,ct:bu};};bb.$cctor=function(){bb.$cctor=a.ignore;bb.noneCT=bc.New(false,[]);bb.scheduler=new be.New();bb.defCTS=[new bf.New()];bb.Zero=_5.Return();bb.GetCT=function(bt){bt.k({$:0,$0:bt.ct});};};bc.New=function(bt,bu){return{c:bt,r:bu};};bd.Filter=function(bt,bu){return new _3.New$2(E.filter(bt,bd.ToArray(bu)));};bd.Intersect=function(bt,bu){var bv;bv=new _3.New$2(bd.ToArray(bt));bv.IntersectWith(bd.ToArray(bu));return bv;};bd.ToArray=function(bt){var bu;bu=E.create(bt.get_Count(),void 0);bt.CopyTo(bu);return bu;};bd.Except=function(bt,bu){var bv;bv=new _3.New$2(bd.ToArray(bu));bv.ExceptWith(bd.ToArray(bt));return bv;};be=_5.Scheduler=bp.Class({Fork:function(bt){var bu;bu=this;this.robin.push(bt);this.idle?(this.idle=false,a.setTimeout(function(){bu.tick();},0)):void 0;},tick:function(){var bt,bu,bv;bu=this;bv=bs.now();bt=true;while(bt)if(this.robin.length===0){this.idle=true;bt=false;}else{(this.robin.shift())();bs.now()-bv>40?(a.setTimeout(function(){bu.tick();},0),bt=false):void 0;}}},f,be);be.New=bp.Ctor(function(){this.idle=true;this.robin=[];},be);bf=d.CancellationTokenSource=bp.Class({},f,bf);bf.New=bp.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bf);bg.DocChildren=function(bt){var bu;function bv(bw){if(bw!=null&&bw.$==2)bv(bw.$0.Current);else if(bw!=null&&bw.$==1)bu.push(bw.$0.El);else if(bw==null);else if(bw!=null&&bw.$==5)bu.push(bw.$0);else if(bw!=null&&bw.$==4)bu.push(bw.$0.Text);else if(bw!=null&&bw.$==6)E.iter(function(bx){if(bx.constructor===H)bv(bx);else bu.push(bx);},bw.$0.Els);else{bv(bw.$0);bv(bw.$1);}}bu=[];bv(bt.Children);return{$:0,$0:y.ofSeqNonCopying(bu)};};bg.Children=function(bt,bu){var bv,bw,bx;if(bu!=null&&bu.$==1){bx=[];bv=bu.$0[0].nextSibling;while(bv!==bu.$0[1]){bx.push(bv);bv=bv.nextSibling;}return{$:0,$0:bx};}else return{$:0,$0:E.init(bt.childNodes.length,(bw=bt.childNodes,function(by){return bw[by];}))};};bg.Except=function(bt,bu){var bv;bv=bt.$0;return{$:0,$0:E.filter(function(bw){return E.forall(function(bx){return!(bw===bx);},bv);},bu.$0)};};bg.Iter=function(bt,bu){E.iter(bt,bu.$0);};bh.Clear=function(bt){bt.splice(0,E.length(bt));};bi=d.OperationCanceledException=bp.Class({},null,bi);bi.New=bp.Ctor(function(bt){bi.New$1.call(this,"The operation was canceled.",null,bt);},bi);bi.New$1=bp.Ctor(function(bt,bu,bv){this.message=bt;this.inner=bu;this.ct=bv;},bi);bj.concat=function(bt){var bu,bv;bu=[];for(var bw in bt)bu.push.apply(bu,bt[bw]);return bu;};bk.$cctor=function(){bk.$cctor=a.ignore;bk.Empty={$:0};};bl.Create=function(bt){return bn.New(false,bt,bl.forceLazy);};bl.forceLazy=function(){var bt;bt=this.v();this.c=true;this.v=bt;this.f=bl.cachedLazy;return bt;};bl.cachedLazy=function(){return this.v;};bn.New=function(bt,bu,bv){return{c:bt,v:bu,f:bv};};bp.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
