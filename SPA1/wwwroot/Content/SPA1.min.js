function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo;a=window;b=a.Samples=a.Samples||{};c=b.HelloWorld=b.HelloWorld||{};d=a.StartupCode$SPA1$Client=a.StartupCode$SPA1$Client||{};e=a.WebSharper=a.WebSharper||{};f=e.Operators=e.Operators||{};g=e.Obj=e.Obj||{};h=e.UI=e.UI||{};i=h.Doc=h.Doc||{};j=h.AttrModule=h.AttrModule||{};k=h.Elt=h.Elt||{};l=e.JavaScript=e.JavaScript||{};m=l.Pervasives=l.Pervasives||{};n=h.AttrProxy=h.AttrProxy||{};o=h.DomUtility=h.DomUtility||{};p=h.Attrs=h.Attrs||{};q=h.DocElemNode=h.DocElemNode||{};r=h.Updates=h.Updates||{};s=h.View=h.View||{};t=a.EventTarget;u=a.Node;v=e.Unchecked=e.Unchecked||{};w=h.Array=h.Array||{};x=h.Client=h.Client||{};y=x.Attrs=x.Attrs||{};z=y.Dyn=y.Dyn||{};A=h.Snap=h.Snap||{};B=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};C=l.JSModule=l.JSModule||{};D=h.Docs=h.Docs||{};E=a.CharacterData;F=e.Arrays=e.Arrays||{};G=e.List=e.List||{};H=G.T=G.T||{};I=a.Object;J=h.An=h.An||{};K=x.Settings=x.Settings||{};L=h.Abbrev=h.Abbrev||{};M=L.Mailbox=L.Mailbox||{};N=e.Enumerator=e.Enumerator||{};O=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};P=L.Fresh=L.Fresh||{};Q=a.StartupCode$WebSharper_UI$Doc_Client=a.StartupCode$WebSharper_UI$Doc_Client||{};R=e.Collections=e.Collections||{};S=R.Dictionary=R.Dictionary||{};T=x.Docs=x.Docs||{};U=T.RunState=T.RunState||{};V=T.NodeSet=T.NodeSet||{};W=h.Anims=h.Anims||{};X=N.T=N.T||{};Y=e.Seq=e.Seq||{};Z=R.HashSet=R.HashSet||{};_0=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};_1=e.Concurrency=e.Concurrency||{};_2=h.AppendList=h.AppendList||{};_3=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_4=R.DictionaryUtil=R.DictionaryUtil||{};_5=e.Slice=e.Slice||{};_6=e.Strings=e.Strings||{};_7=h.Easing=h.Easing||{};_8=_1.AsyncBody=_1.AsyncBody||{};_9=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};_=_1.CT=_1.CT||{};$=L.HashSet=L.HashSet||{};ba=_1.Scheduler=_1.Scheduler||{};bb=e.CancellationTokenSource=e.CancellationTokenSource||{};bc=T.DomNodes=T.DomNodes||{};bd=e.Queue=e.Queue||{};be=e.OperationCanceledException=e.OperationCanceledException||{};bf=R.HashSetUtil=R.HashSetUtil||{};bg=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bh=e.Lazy=e.Lazy||{};bi=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};bj=bi.LazyRecord=bi.LazyRecord||{};bk=a.IntelliFactory;bl=bk&&bk.Runtime;bm=a.console;bn=a.jQuery;bo=a.Date;c.Main=function(){d.$cctor();return d.Main;};d.$cctor=function(){var bp;d.$cctor=a.ignore;d.Main=(bp=i.Element("p",[],[i.TextNode("Hello!")]),i.RunById("main",i.Element("div",[],[bp,i.Element("button",[j.Handler("click",function(){return function(){return bp.SetText("Hello, world!");};})],[i.TextNode("Click Me!")])])));};f.FailWith=function(bp){throw a.Error(bp);};f.KeyValue=function(bp){return[bp.K,bp.V];};g=e.Obj=bl.Class({Equals:function(bp){return this===bp;},GetHashCode:function(){return -1;}},null,g);i=h.Doc=bl.Class({},g,i);i.Element=function(bp,bq,br){var bs,bt;bs=n.Concat(bq);bt=i.Concat(br);return k.New(o.CreateElement(bp),bs,bt);};i.RunById=function(bp,bq){var br;br=o.Doc().getElementById(bp);v.Equals(br,null)?f.FailWith("invalid id: "+bp):i.Run(br,bq);};i.Concat=function(bp){var bq;bq=w.ofSeqNonCopying(bp);return w.TreeReduce(i.Empty(),i.Append,bq);};i.TextNode=function(bp){return i.Mk({$:5,$0:o.CreateText(bp)},s.Const());};i.Run=function(bp,bq){i.LoadLocalTemplates$1();D.LinkElement(bp,bq.docNode);i.RunInPlace(false,bp,bq);};i.Empty=function(){return i.Mk(null,s.Const());};i.Append=function(bp,bq){return i.Mk({$:0,$0:bp.docNode,$1:bq.docNode},s.Map2Unit(bp.updates,bq.updates));};i.Mk=function(bp,bq){return new i.New(bp,bq);};i.LoadLocalTemplates$1=function(){if(!D.LocalTemplatesLoaded()){D.set_LocalTemplatesLoaded(true);i.LoadLocalTemplates("");}};i.RunInPlace=function(bp,bq,br){var bs;bs=D.CreateRunState(bq,br.docNode);s.Sink(J.get_UseAnimations()||K.BatchUpdatesEnabled()?M.StartProcessor(D.PerformAnimatedUpdate(bp,bs,br.docNode)):function(){D.PerformSyncUpdate(bp,bs,br.docNode);},br.updates);};i.LoadLocalTemplates=function(bp){var bq;bq=D.LoadedTemplateFile("");bq.count>0?D.LoadedTemplates().set_Item(bp,bq):(function(){var br,bs,bt,bu;while(true){br=a.document.querySelector("[ws-template]");if(v.Equals(br,null)){bs=a.document.querySelector("[ws-children-template]");if(v.Equals(bs,null))return null;else{bt=bs.getAttribute("ws-children-template");bs.removeAttribute("ws-children-template");i.PrepareTemplate(bp,{$:1,$0:bt},function(bv){return function(){return o.ChildrenArray(bv);};}(bs));}}else{bu=br.getAttribute("ws-template");i.PrepareSingleTemplate(bp,{$:1,$0:bu},br);}}}(),D.LoadedTemplates().set_Item("",D.LoadedTemplateFile(bp)));};i.PrepareTemplate=function(bp,bq,br){var bs,bt,bu,bv,bw;if(!D.LoadedTemplateFile(bp).ContainsKey(bq==null?"":bq.$0)){bs=br();for(bt=0,bu=bs.length-1;bt<=bu;bt++){bv=F.get(bs,bt);bw=bv.parentNode;v.Equals(bw,null)?void 0:bw.removeChild(bv);}i.PrepareTemplateStrict(bp,bq,bs,null);}};i.PrepareSingleTemplate=function(bp,bq,br){var bs,bt,bu;br.removeAttribute("ws-template");bs=br.getAttribute("ws-replace");bs===null?void 0:(br.removeAttribute("ws-replace"),bt=br.parentNode,v.Equals(bt,null)?void 0:(bu=a.document.createElement(br.tagName),bu.setAttribute("ws-replace",bs),bt.replaceChild(bu,br)));i.PrepareTemplateStrict(bp,bq,[br],null);};i.PrepareTemplateStrict=function(bp,bq,br,bs){var bt,bu;function bv(bH){var bJ,bK,bL,bM,bN,bO,bP,bQ;function bI(bR){var bS;bS=bH.getAttribute(bR);bS===null?void 0:bH.setAttribute(bR,bS.toLowerCase());}bJ=bH.attributes;bK=[];bL=[];bM=[];for(bN=0,bO=bJ.length-1;bN<=bO;bN++){bP=bJ.item(bN);_6.StartsWith(bP.nodeName,"ws-on")&&bP.nodeName!=="ws-onafterrender"&&bP.nodeName!=="ws-on"?(bK.push(bP.nodeName),bL.push(_5.string(bP.nodeName,{$:1,$0:"ws-on".length},null)+":"+bP.nodeValue.toLowerCase())):!_6.StartsWith(bP.nodeName,"ws-")&&(new a.RegExp(D.TextHoleRE())).test(bP.nodeValue)?(bP.nodeValue=(bQ=new a.RegExp(D.TextHoleRE(),"g"),bP.nodeValue.replace(bQ,function(bR,bS){return"${"+bS.toLowerCase()+"}";})),bM.push(bP.nodeName)):void 0;}!(bL.length==0)?bH.setAttribute("ws-on",_6.concat(" ",bL)):void 0;!(bM.length==0)?bH.setAttribute("ws-attr-holes",_6.concat(" ",bM)):void 0;bI("ws-hole");bI("ws-replace");bI("ws-attr");bI("ws-onafterrender");bI("ws-var");F.iter(function(bR){bH.removeAttribute(bR);},bK);}function bw(bH){var bI,bJ,bK,bL,bM,bN;bI=null;bJ=0;bL=bH.textContent;bM=new a.RegExp(D.TextHoleRE(),"g");while(bI=bM.exec(bL),bI!==null){bH.parentNode.insertBefore(a.document.createTextNode(_5.string(bL,{$:1,$0:bJ},{$:1,$0:bM.lastIndex-F.get(bI,0).length-1})),bH);bJ=bM.lastIndex;bN=a.document.createElement("span");bN.setAttribute("ws-replace",F.get(bI,1).toLowerCase());bH.parentNode.insertBefore(bN,bH);}bM.lastIndex=0;bH.textContent=_5.string(bL,{$:1,$0:bJ},null);}function bx(bH,bI){function bJ(bK){o.IterSelector(bH,"["+bK+"]",function(bL){var bM,bN;bM=(bN=null,[bI.TryGetValue(bL.getAttribute(bK).toLowerCase(),{get:function(){return bN;},set:function(bO){bN=bO;}}),bN]);bM[0]?bL.setAttribute(bK,bM[1]):void 0;});}bJ("ws-hole");bJ("ws-replace");bJ("ws-attr");bJ("ws-onafterrender");bJ("ws-var");o.IterSelector(bH,"[ws-on]",function(bK){bK.setAttribute("ws-on",_6.concat(" ",F.map(function(bL){var bM,bN,bO;bM=_6.SplitChars(bL,[":"],1);bN=(bO=null,[bI.TryGetValue(F.get(bM,1),{get:function(){return bO;},set:function(bP){bO=bP;}}),bO]);return bN[0]?F.get(bM,0)+":"+bN[1]:bL;},_6.SplitChars(bK.getAttribute("ws-on"),[" "],1))));});return o.IterSelector(bH,"[ws-attr-holes]",function(bK){var bL,bM,bN;bL=_6.SplitChars(bK.getAttribute("ws-attr-holes"),[" "],1);for(bM=0,bN=bL.length-1;bM<=bN;bM++)(function(){var bO;function bP(bQ,bR){var bS;bS=f.KeyValue(bR);return bQ.replace(new a.RegExp("\\${"+bS[0]+"}","ig"),"${"+bS[1]+"}");}bO=F.get(bL,bM);return bK.setAttribute(bO,(((bl.Curried3(Y.fold))(bP))(bK.getAttribute(bO)))(bI));}());});}function by(bH,bI){var bJ,bK,bL,bM,bN;bv(bI);bJ=bI.nodeName.toLowerCase();bK=bH.querySelector("[ws-attr="+bJ+"]");if(v.Equals(bK,null))return bm.warn("Filling non-existent attr hole",bJ);else{bK.removeAttribute("ws-attr");for(bL=0,bM=bI.attributes.length-1;bL<=bM;bL++){bN=bI.attributes.item(bL);bN.name==="class"&&bK.hasAttribute("class")?bK.setAttribute("class",bK.getAttribute("class")+" "+bN.nodeValue):bK.setAttribute(bN.name,bN.nodeValue);}return;}}function bz(bH,bI){function bJ(bK){o.IterSelector(bH,"["+bK+"]",function(bL){if(!bI.Contains(bL.getAttribute(bK)))bL.removeAttribute(bK);});}bJ("ws-attr");bJ("ws-onafterrender");bJ("ws-var");o.IterSelector(bH,"[ws-hole]",function(bK){if(!bI.Contains(bK.getAttribute("ws-hole"))){bK.removeAttribute("ws-hole");while(bK.hasChildNodes())bK.removeChild(bK.lastChild);}});o.IterSelector(bH,"[ws-replace]",function(bK){if(!bI.Contains(bK.getAttribute("ws-replace")))bK.parentNode.removeChild(bK);});o.IterSelector(bH,"[ws-on]",function(bK){bK.setAttribute("ws-on",_6.concat(" ",F.filter(function(bL){return bI.Contains(F.get(_6.SplitChars(bL,[":"],1),1));},_6.SplitChars(bK.getAttribute("ws-on"),[" "],1))));});return o.IterSelector(bH,"[ws-attr-holes]",function(bK){var bL,bM,bN,bO,bP;bL=_6.SplitChars(bK.getAttribute("ws-attr-holes"),[" "],1);for(bM=0,bN=bL.length-1;bM<=bN;bM++){bO=F.get(bL,bM);bK.setAttribute(bO,(bP=new a.RegExp(D.TextHoleRE(),"g"),bK.getAttribute(bO).replace(bP,function(bQ,bR){return bI.Contains(bR)?bQ:"";})));}});}function bA(bH,bI){var bJ;bJ=bH.querySelector("[ws-replace]");return v.Equals(bJ,null)?(bm.warn("Filling non-existent text hole",bq),null):(bJ.parentNode.replaceChild(new a.Text(bI),bJ),{$:1,$0:bJ.getAttribute("ws-replace")});}function bB(bH,bI,bJ){while(true)if(bH.hasChildNodes())bJ=bI.insertBefore(bH.lastChild,bJ);else return null;}function bC(bH,bI,bJ){var bK,bL,bM,bN,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_;function bO(b$){}while(true)switch(bH){case 0:bP=_5.string(bI.nodeName,{$:1,$0:3},null).toLowerCase();bQ=(bK=bP.indexOf("."),bK===-1?[bp,bP]:[_5.string(bP,null,{$:1,$0:bK-1}),_5.string(bP,{$:1,$0:bK+1},null)]);bR=bQ[1];bS=bQ[0];if(!D.LoadedTemplates().ContainsKey(bS))return bm.warn("Instantiating non-loaded template",bR);else{bT=D.LoadedTemplates().get_Item(bS);if(!bT.ContainsKey(bR))return bm.warn("Instantiating non-loaded template",bR);else{bU=bT.get_Item(bR);bV=bU.cloneNode(true);bW=new Z.New$3();bX=new S.New$5();bY=bI.attributes;for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=bY.item(bZ).name.toLowerCase();bX.set_Item(b1,(b2=bY.item(bZ).nodeValue,b2===""?b1:b2.toLowerCase()));!bW.Add(b1)?bm.warn("Hole mapped twice",b1):void 0;}for(b3=0,b4=bI.childNodes.length-1;b3<=b4;b3++){b5=bI.childNodes[b3];v.Equals(b5.nodeType,u.ELEMENT_NODE)?!bW.Add(b5.nodeName.toLowerCase())?bm.warn("Hole filled twice",bR):void 0:void 0;}b6=bI.childNodes.length===1&&v.Equals(bI.firstChild.nodeType,u.TEXT_NODE);if(b6){bM=bA(bV,bI.firstChild.textContent);((function(b$){return function(ca){if(ca!=null)b$(ca.$0);};}((bN=function(b$){return function(ca){return b$.Add(ca);};}(bW),function(b$){return bO(bN(b$));})))(bM));}bz(bV,bW);if(!b6){for(b7=0,b8=bI.childNodes.length-1;b7<=b8;b7++){b9=bI.childNodes[b7];v.Equals(b9.nodeType,u.ELEMENT_NODE)?b9.hasAttributes()?by(bV,b9):bD(bV,b9):void 0;}}bx(bV,bX);(((function(b$){function ca(cb,cc){return bB(b$,cb,cc);}return function(cb){return function(cc){return ca(cb,cc);};};}(bV))(bI.parentNode))(bI));bI.parentNode.removeChild(bI);return;}}break;case 1:if(bJ!==null){b_=bJ.nextSibling;if(v.Equals(bJ.nodeType,u.TEXT_NODE))bw(bJ);else if(v.Equals(bJ.nodeType,u.ELEMENT_NODE))bF(bJ);bJ=b_;}else return null;break;}}function bD(bH,bI){var bJ,bL,bM;function bK(bN,bO){var bP,bQ,bR;if(bL==="title"&&bI.hasChildNodes()){bP=bn.parseHTML(bI.textContent);bI.removeChild(bI.firstChild);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bI.appendChild(F.get(bP,bQ));}else null;bF(bI);return bB(bI,bN,bO);}bL=bI.nodeName.toLowerCase();o.IterSelector(bH,"[ws-attr-holes]",function(bN){var bO,bP,bQ,bR,bS;bO=_6.SplitChars(bN.getAttribute("ws-attr-holes"),[" "],1);for(bP=0,bQ=bO.length-1;bP<=bQ;bP++){bR=F.get(bO,bP);bN.setAttribute(bR,(bS=new a.RegExp("\\${"+bL+"}","ig"),bN.getAttribute(bR).replace(bS,bI.textContent)));}});bM=bH.querySelector("[ws-hole="+bL+"]");if(v.Equals(bM,null)){bJ=bH.querySelector("[ws-replace="+bL+"]");return v.Equals(bJ,null)?null:(bK(bJ.parentNode,bJ),void bJ.parentNode.removeChild(bJ));}else{while(bM.hasChildNodes())bM.removeChild(bM.lastChild);bM.removeAttribute("ws-hole");return bK(bM,null);}}function bE(bH){return bC(0,bH);}function bF(bH){var bI,bJ;if(_6.StartsWith(bH.nodeName.toLowerCase(),"ws-")&&!bH.hasAttribute("ws-template"))bE(bH);else{bv(bH);bI=bH.getAttribute("ws-template");if(bI===null){bJ=bH.getAttribute("ws-children-template");if(bJ===null)bG(bH,bH.firstChild);else{bH.removeAttribute("ws-children-template");i.PrepareTemplate(bp,{$:1,$0:bJ},function(){return o.ChildrenArray(bH);});while(bH.hasChildNodes())bH.removeChild(bH.lastChild);}}else i.PrepareSingleTemplate(bp,{$:1,$0:bI},bH);}}function bG(bH,bI){return bC(1,bH,bI);}bt=bs!=null&&bs.$==1?bs.$0:i.FakeRoot(br);bu=(bq==null?"":bq.$0).toLowerCase();D.LoadedTemplateFile(bp).set_Item(bu,bt);F.length(br)>0?bG(bt,F.get(br,0)):void 0;};i.FakeRoot=function(bp){var bq,br,bs;bq=a.document.createElement("div");for(br=0,bs=bp.length-1;br<=bs;br++)bq.appendChild(F.get(bp,br));return bq;};i.New=bl.Ctor(function(bp,bq){this.docNode=bp;this.updates=bq;},i);j.Handler=function(bp,bq){return p.Static(function(br){br.addEventListener(bp,function(bs){return(bq(br))(bs);},false);});};k=h.Elt=bl.Class({SetText:function(bp){var bq;bq=this.docNode$1;bq!=null&&bq.$==1?bq.$0.Children=null:bq!=null&&bq.$==6?(bq.$0.Els=[],this.ClearHoles()):f.FailWith("Invalid docNode in Elt");this.rvUpdates.set_Value(s.Const());this.elt.textContent=bp;},ClearHoles:function(){var bp;bp=this.docNode$1;bp!=null&&bp.$==6?bp.$0.Holes=[]:void 0;}},i,k);k.New=function(bp,bq,br){var bs,bt;bs=D.CreateElemNode(bp,bq,br.docNode);bt=r.Create(br.updates);return new k.New$1({$:1,$0:bs},s.Map2Unit(p.Updates(bs.Attr),bt.v),bp,bt);};k.New$1=bl.Ctor(function(bp,bq,br,bs){i.New.call(this,bp,bq);this.docNode$1=bp;this.updates$1=bq;this.elt=br;this.rvUpdates=bs;},k);m.NewFromSeq=function(bp){var bq,br,bs;bq={};br=N.Get(bp);try{while(br.MoveNext()){bs=br.Current();bq[bs[0]]=bs[1];}}finally{if("Dispose"in br)br.Dispose();}return bq;};n=h.AttrProxy=bl.Class({},null,n);n.Concat=function(bp){var bq;bq=w.ofSeqNonCopying(bp);return w.TreeReduce(p.EmptyAttr(),n.Append,bq);};n.Append=function(bp,bq){return p.AppendTree(bp,bq);};o.CreateElement=function(bp){return o.Doc().createElement(bp);};o.Doc=function(){B.$cctor();return B.Doc;};o.CreateText=function(bp){return o.Doc().createTextNode(bp);};o.ChildrenArray=function(bp){var bq,br,bs;bq=[];for(br=0,bs=bp.childNodes.length-1;br<=bs;br++)bq.push(bp.childNodes[br]);return bq;};o.InsertAt=function(bp,bq,br){var bs;if(!(br.parentNode===bp&&bq===(bs=br.nextSibling,v.Equals(bs,null)?null:bs)))bp.insertBefore(br,bq);};o.IterSelector=function(bp,bq,br){var bs,bt,bu;bs=bp.querySelectorAll(bq);for(bt=0,bu=bs.length-1;bt<=bu;bt++)br(bs[bt]);};o.RemoveNode=function(bp,bq){if(bq.parentNode===bp)bp.removeChild(bq);};p.Static=function(bp){return new n({$:3,$0:bp});};p.EmptyAttr=function(){O.$cctor();return O.EmptyAttr;};p.AppendTree=function(bp,bq){var br;return bp===null?bq:bq===null?bp:(br=new n({$:2,$0:bp,$1:bq}),(p.SetFlags(br,p.Flags(bp)|p.Flags(bq)),br));};p.Updates=function(bp){return w.MapTreeReduce(function(bq){return bq.NChanged();},s.Const(),s.Map2Unit,bp.DynNodes);};p.SetFlags=function(bp,bq){bp.flags=bq;};p.Flags=function(bp){return bp!==null&&bp.hasOwnProperty("flags")?bp.flags:0;};p.Insert=function(bp,bq){var br,bs,bt;function bu(bv){if(!(bv===null))if(bv!=null&&bv.$==1)br.push(bv.$0);else if(bv!=null&&bv.$==2){bu(bv.$0);bu(bv.$1);}else if(bv!=null&&bv.$==3)bv.$0(bp);else if(bv!=null&&bv.$==4)bs.push(bv.$0);}br=[];bs=[];bu(bq);bt=br.slice(0);return z.New(bp,p.Flags(bq),bt,bs.length===0?null:{$:1,$0:function(bv){Y.iter(function(bw){bw(bv);},bs);}});};p.HasChangeAnim=function(bp){var bq;bq=4;return(bp.DynFlags&bq)===bq;};p.GetChangeAnim=function(bp){return p.GetAnim(bp,function(bq,br){return bq.NGetChangeAnim(br);});};p.HasEnterAnim=function(bp){var bq;bq=1;return(bp.DynFlags&bq)===bq;};p.GetEnterAnim=function(bp){return p.GetAnim(bp,function(bq,br){return bq.NGetEnterAnim(br);});};p.HasExitAnim=function(bp){var bq;bq=2;return(bp.DynFlags&bq)===bq;};p.GetExitAnim=function(bp){return p.GetAnim(bp,function(bq,br){return bq.NGetExitAnim(br);});};p.GetAnim=function(bp,bq){return J.Concat(F.map(function(br){return bq(br,bp.DynElem);},bp.DynNodes));};p.Sync=function(bp,bq){F.iter(function(br){br.NSync(bp);},bq.DynNodes);};q=h.DocElemNode=bl.Class({Equals:function(bp){return this.ElKey===bp.ElKey;},GetHashCode:function(){return this.ElKey;}},null,q);q.New=function(bp,bq,br,bs,bt,bu){var bv;return new q((bv={Attr:bp,Children:bq,El:bs,ElKey:bt},(bl.SetOptional(bv,"Delimiters",br),bl.SetOptional(bv,"Render",bu),bv)));};r=h.Updates=bl.Class({set_Value:function(bp){var bq;bq=this.s;!(bq===null)?A.Obsolete(bq):void 0;this.c=bp;}},null,r);r.Create=function(bp){var bq;bq=null;bq=r.New(bp,null,function(){var br;br=bq.s;return br===null?(br=A.Copy(bq.c()),bq.s=br,A.WhenObsoleteRun(br,function(){bq.s=null;}),br):br;});return bq;};r.New=function(bp,bq,br){return new r({c:bp,s:bq,v:br});};s.Const=function(bp){var bq;bq=A.New({$:0,$0:bp});return function(){return bq;};};s.Map2Unit=function(bp,bq){return s.CreateLazy(function(){return A.Map2Unit(bp(),bq());});};s.Sink=function(bp,bq){function br(){A.WhenRun(bq(),bp,function(){_1.scheduler().Fork(br);});}_1.scheduler().Fork(br);};s.CreateLazy=function(bp){var bq;bq={c:null,o:bp};return function(){var br,bs;br=bq.c;return br===null?(br=bq.o(),bq.c=br,(bs=br.s,bs!=null&&bs.$==0)?bq.o=null:A.WhenObsoleteRun(br,function(){bq.c=null;}),br):br;};};v.Equals=function(bp,bq){var br,bs,bt,bu;if(bp===bq)return true;else{br=typeof bp;if(br=="object"){if(bp===null||bp===void 0||bq===null||bq===void 0)return false;else if("Equals"in bp)return bp.Equals(bq);else if(bp instanceof a.Array&&bq instanceof a.Array)return v.arrayEquals(bp,bq);else if(bp instanceof a.Date&&bq instanceof a.Date)return v.dateEquals(bp,bq);else{bs=[true];for(var bv in bp)if(function(bw){bs[0]=!bp.hasOwnProperty(bw)||bq.hasOwnProperty(bw)&&v.Equals(bp[bw],bq[bw]);return!bs[0];}(bv))break;if(bs[0]){for(var bw in bq)if(function(bx){bs[0]=!bq.hasOwnProperty(bx)||bp.hasOwnProperty(bx);return!bs[0];}(bw))break;}return bs[0];}}else return br=="function"&&("$Func"in bp?bp.$Func===bq.$Func&&bp.$Target===bq.$Target:"$Invokes"in bp&&"$Invokes"in bq&&v.arrayEquals(bp.$Invokes,bq.$Invokes));}};v.arrayEquals=function(bp,bq){var br,bs;if(F.length(bp)===F.length(bq)){br=true;bs=0;while(br&&bs<F.length(bp)){!v.Equals(F.get(bp,bs),F.get(bq,bs))?br=false:void 0;bs=bs+1;}return br;}else return false;};v.dateEquals=function(bp,bq){return bp.getTime()===bq.getTime();};v.Hash=function(bp){var bq;bq=typeof bp;return bq=="function"?0:bq=="boolean"?bp?1:0:bq=="number"?bp:bq=="string"?v.hashString(bp):bq=="object"?bp==null?0:bp instanceof a.Array?v.hashArray(bp):v.hashObject(bp):0;};v.hashString=function(bp){var bq,br,bs;if(bp===null)return 0;else{bq=5381;for(br=0,bs=bp.length-1;br<=bs;br++)bq=v.hashMix(bq,bp[br].charCodeAt());return bq;}};v.hashArray=function(bp){var bq,br,bs;bq=-34948909;for(br=0,bs=F.length(bp)-1;br<=bs;br++)bq=v.hashMix(bq,v.Hash(F.get(bp,br)));return bq;};v.hashObject=function(bp){var bq,br;if("GetHashCode"in bp)return bp.GetHashCode();else{bq=[0];for(var bs in bp)if(function(bt){bq[0]=v.hashMix(v.hashMix(bq[0],v.hashString(bt)),v.Hash(bp[bt]));return false;}(bs))break;return bq[0];}};v.Compare=function(bp,bq){var br,bs,bt,bu,bv,bw;if(bp===bq)return 0;else{bs=typeof bp;switch(bs=="function"?1:bs=="boolean"?2:bs=="number"?2:bs=="string"?2:bs=="object"?3:0){case 0:return typeof bq=="undefined"?0:-1;break;case 1:return f.FailWith("Cannot compare function values.");break;case 2:return bp<bq?-1:1;break;case 3:if(bp===null)bt=-1;else if(bq===null)bt=1;else if("CompareTo"in bp)bt=bp.CompareTo(bq);else if("CompareTo0"in bp)bt=bp.CompareTo0(bq);else if(bp instanceof a.Array&&bq instanceof a.Array)bt=v.compareArrays(bp,bq);else if(bp instanceof a.Date&&bq instanceof a.Date)bt=v.compareDates(bp,bq);else{bu=[0];for(var bx in bp)if(function(by){return!bp.hasOwnProperty(by)?false:!bq.hasOwnProperty(by)?(bu[0]=1,true):(bu[0]=v.Compare(bp[by],bq[by]),bu[0]!==0);}(bx))break;if(bu[0]===0){for(var by in bq)if(function(bz){return!bq.hasOwnProperty(bz)?false:!bp.hasOwnProperty(bz)&&(bu[0]=-1,true);}(by))break;}bt=bu[0];}return bt;break;}}};v.hashMix=function(bp,bq){return(bp<<5)+bp+bq;};v.compareArrays=function(bp,bq){var br,bs;if(F.length(bp)<F.length(bq))return -1;else if(F.length(bp)>F.length(bq))return 1;else{br=0;bs=0;while(br===0&&bs<F.length(bp)){br=v.Compare(F.get(bp,bs),F.get(bq,bs));bs=bs+1;}return br;}};v.compareDates=function(bp,bq){return v.Compare(bp.getTime(),bq.getTime());};s=h.View=bl.Class({},null,s);w.ofSeqNonCopying=function(bp){var bq,br;if(bp instanceof a.Array)return bp;else if(bp instanceof H)return F.ofList(bp);else if(bp===null)return[];else{bq=[];br=N.Get(bp);try{while(br.MoveNext())bq.push(br.Current());return bq;}finally{if("Dispose"in br)br.Dispose();}}};w.TreeReduce=function(bp,bq,br){var bs;function bt(bu,bv){var bw,bx;return bv<=0?bp:bv===1&&(bu>=0&&bu<bs)?F.get(br,bu):(bx=bv/2>>0,bq(bt(bu,bx),bt(bu+bx,bv-bx)));}bs=F.length(br);return bt(0,bs);};w.MapTreeReduce=function(bp,bq,br,bs){var bt;function bu(bv,bw){var bx,by;return bw<=0?bq:bw===1&&(bv>=0&&bv<bt)?bp(F.get(bs,bv)):(by=bw/2>>0,br(bu(bv,by),bu(bv+by,bw-by)));}bt=F.length(bs);return bu(0,bt);};z.New=function(bp,bq,br,bs){var bt;bt={DynElem:bp,DynFlags:bq,DynNodes:br};bl.SetOptional(bt,"OnAfterRender",bs);return bt;};A.Map2Unit=function(bp,bq){var br,bs,bt;function bu(){var bv,bw,bx;if(!(bv=bt.s,bv!=null&&bv.$==0||bv!=null&&bv.$==2)){bw=A.ValueAndForever(bp);bx=A.ValueAndForever(bq);bw!=null&&bw.$==1?bx!=null&&bx.$==1?bw.$0[1]&&bx.$0[1]?A.MarkForever(bt,null):A.MarkReady(bt,null):void 0:void 0;}}br=bp.s;bs=bq.s;return br!=null&&br.$==0?bs!=null&&bs.$==0?A.New({$:0,$0:null}):bq:bs!=null&&bs.$==0?bp:(bt=A.New({$:3,$0:[],$1:[]}),(A.When(bp,bu,bt),A.When(bq,bu,bt),bt));};A.Copy=function(bp){var bq,br,bs;bq=bp.s;return bq==null?bp:bq!=null&&bq.$==2?(br=A.New({$:2,$0:bq.$0,$1:[]}),(A.WhenObsolete(bp,br),br)):bq!=null&&bq.$==3?(bs=A.New({$:3,$0:[],$1:[]}),(A.When(bp,function(bt){A.MarkDone(bs,bp,bt);},bs),bs)):bp;};A.WhenObsoleteRun=function(bp,bq){var br;br=bp.s;br==null?bq():br!=null&&br.$==2?br.$1.push(bq):br!=null&&br.$==3?br.$1.push(bq):void 0;};A.WhenRun=function(bp,bq,br){var bs;bs=bp.s;bs==null?br():bs!=null&&bs.$==2?(bs.$1.push(br),bq(bs.$0)):bs!=null&&bs.$==3?(bs.$0.push(bq),bs.$1.push(br)):bq(bs.$0);};A.ValueAndForever=function(bp){var bq;bq=bp.s;return bq!=null&&bq.$==0?{$:1,$0:[bq.$0,true]}:bq!=null&&bq.$==2?{$:1,$0:[bq.$0,false]}:null;};A.MarkForever=function(bp,bq){var br,bs,bt,bu;br=bp.s;if(br!=null&&br.$==3){bp.s={$:0,$0:bq};bs=br.$0;for(bt=0,bu=F.length(bs)-1;bt<=bu;bt++)(F.get(bs,bt))(bq);}else void 0;};A.MarkReady=function(bp,bq){var br,bs,bt,bu;br=bp.s;if(br!=null&&br.$==3){bp.s={$:2,$0:bq,$1:br.$1};bs=br.$0;for(bt=0,bu=F.length(bs)-1;bt<=bu;bt++)(F.get(bs,bt))(bq);}else void 0;};A.When=function(bp,bq,br){var bs;bs=bp.s;bs==null?A.Obsolete(br):bs!=null&&bs.$==2?(A.EnqueueSafe(bs.$1,br),bq(bs.$0)):bs!=null&&bs.$==3?(bs.$0.push(bq),A.EnqueueSafe(bs.$1,br)):bq(bs.$0);};A.WhenObsolete=function(bp,bq){var br;br=bp.s;br==null?A.Obsolete(bq):br!=null&&br.$==2?A.EnqueueSafe(br.$1,bq):br!=null&&br.$==3?A.EnqueueSafe(br.$1,bq):void 0;};A.MarkDone=function(bp,bq,br){var bs;if(bs=bq.s,bs!=null&&bs.$==0)A.MarkForever(bp,br);else A.MarkReady(bp,br);};A.EnqueueSafe=function(bp,bq){var br,bs,bt,bu;bp.push(bq);if(bp.length%20===0){br=bp.slice(0);bd.Clear(bp);for(bs=0,bt=F.length(br)-1;bs<=bt;bs++){bu=F.get(br,bs);typeof bu=="object"?function(bv){if(bv.s)bp.push(bv);}(bu):function(bv){bp.push(bv);}(bu);}}else void 0;};B.$cctor=function(){B.$cctor=a.ignore;B.Doc=a.document;};C.GetFieldValues=function(bp){var bq,br;bq=[];for(var bs in bp)bq.push(bp[bs]);return bq;};D.LinkElement=function(bp,bq){D.InsertDoc(bp,bq,null);};D.CreateElemNode=function(bp,bq,br){var bs;D.LinkElement(bp,br);bs=p.Insert(bp,bq);return q.New(bs,br,null,bp,P.Int(),bl.GetOptional(bs.OnAfterRender));};D.LocalTemplatesLoaded=function(){Q.$cctor();return Q.LocalTemplatesLoaded;};D.set_LocalTemplatesLoaded=function(bp){Q.$cctor();Q.LocalTemplatesLoaded=bp;};D.InsertDoc=function(bp,bq,br){var bs;return bq!=null&&bq.$==1?D.InsertNode(bp,bq.$0.El,br):bq!=null&&bq.$==2?(bs=bq.$0,(bs.Dirty=false,D.InsertDoc(bp,bs.Current,br))):bq==null?br:bq!=null&&bq.$==4?D.InsertNode(bp,bq.$0.Text,br):bq!=null&&bq.$==5?D.InsertNode(bp,bq.$0,br):bq!=null&&bq.$==6?F.foldBack(function(bt,bu){return bt.constructor===I?D.InsertDoc(bp,bt,bu):D.InsertNode(bp,bt,bu);},bq.$0.Els,br):D.InsertDoc(bp,bq.$0,D.InsertDoc(bp,bq.$1,br));};D.CreateRunState=function(bp,bq){return U.New(V.get_Empty(),D.CreateElemNode(bp,p.EmptyAttr(),bq));};D.PerformAnimatedUpdate=function(bp,bq,br){var bs;return J.get_UseAnimations()?(bs=null,_1.Delay(function(){var bt,bu,bv;bt=V.FindAll(br);bu=D.ComputeChangeAnim(bq,bt);bv=D.ComputeEnterAnim(bq,bt);return _1.Bind(J.Play(J.Append(bu,D.ComputeExitAnim(bq,bt))),function(){return _1.Bind(D.SyncElemNodesNextFrame(bp,bq),function(){return _1.Bind(J.Play(bv),function(){bq.PreviousNodes=bt;return _1.Return(null);});});});})):D.SyncElemNodesNextFrame(bp,bq);};D.PerformSyncUpdate=function(bp,bq,br){var bs;bs=V.FindAll(br);D.SyncElemNode(bp,bq.Top);bq.PreviousNodes=bs;};D.LoadedTemplateFile=function(bp){var bq,br,bs;bq=(br=null,[D.LoadedTemplates().TryGetValue(bp,{get:function(){return br;},set:function(bt){br=bt;}}),br]);return bq[0]?bq[1]:(bs=new S.New$5(),(D.LoadedTemplates().set_Item(bp,bs),bs));};D.LoadedTemplates=function(){Q.$cctor();return Q.LoadedTemplates;};D.InsertNode=function(bp,bq,br){o.InsertAt(bp,br,bq);return bq;};D.ComputeChangeAnim=function(bp,bq){var br;function bs(bt){return p.HasChangeAnim(bt.Attr);}br=function(bt){return V.Filter(bs,bt);};return J.Concat(F.map(function(bt){return p.GetChangeAnim(bt.Attr);},V.ToArray(V.Intersect(br(bp.PreviousNodes),br(bq)))));};D.ComputeEnterAnim=function(bp,bq){return J.Concat(F.map(function(br){return p.GetEnterAnim(br.Attr);},V.ToArray(V.Except(bp.PreviousNodes,V.Filter(function(br){return p.HasEnterAnim(br.Attr);},bq)))));};D.ComputeExitAnim=function(bp,bq){return J.Concat(F.map(function(br){return p.GetExitAnim(br.Attr);},V.ToArray(V.Except(bq,V.Filter(function(br){return p.HasExitAnim(br.Attr);},bp.PreviousNodes)))));};D.SyncElemNodesNextFrame=function(bp,bq){function br(bs){a.requestAnimationFrame(function(){D.SyncElemNode(bp,bq.Top);bs();});}return K.BatchUpdatesEnabled()?_1.FromContinuations(function(bs,bt,bu){return br.apply(null,[bs,bt,bu]);}):(D.SyncElemNode(bp,bq.Top),_1.Return(null));};D.SyncElemNode=function(bp,bq){!bp?D.SyncElement(bq):void 0;D.Sync(bq.Children);D.AfterRender(bq);};D.SyncElement=function(bp){function bq(br){function bs(bt){var bu,bv;return bt!=null&&bt.$==0?bs(bt.$0)||bs(bt.$1):bt!=null&&bt.$==2?(bu=bt.$0,bu.Dirty||bs(bu.Current)):bt!=null&&bt.$==6&&(bv=bt.$0,bv.Dirty||F.exists(bq,bv.Holes));}return bs(br.Children);}p.Sync(bp.El,bp.Attr);bq(bp)?D.DoSyncElement(bp):void 0;};D.Sync=function(bp){var bq,br;if(bp!=null&&bp.$==1)D.SyncElemNode(false,bp.$0);else if(bp!=null&&bp.$==2)D.Sync(bp.$0.Current);else if(bp==null);else if(bp!=null&&bp.$==5);else if(bp!=null&&bp.$==4){bq=bp.$0;bq.Dirty?(bq.Text.nodeValue=bq.Value,bq.Dirty=false):void 0;}else if(bp!=null&&bp.$==6){br=bp.$0;F.iter(function(bs){D.SyncElemNode(false,bs);},br.Holes);F.iter(function(bs){p.Sync(bs[0],bs[1]);},br.Attrs);D.AfterRender(br);}else{D.Sync(bp.$0);D.Sync(bp.$1);}};D.AfterRender=function(bp){var bq;bq=bl.GetOptional(bp.Render);bq!=null&&bq.$==1?(bq.$0(bp.El),bl.SetOptional(bp,"Render",null)):void 0;};D.TextHoleRE=function(){Q.$cctor();return Q.TextHoleRE;};D.DoSyncElement=function(bp){var bq,br,bs;function bt(bu,bv){var bw,bx;return bu!=null&&bu.$==1?bu.$0.El:bu!=null&&bu.$==2?(bw=bu.$0,bw.Dirty?(bw.Dirty=false,D.InsertDoc(bq,bw.Current,bv)):bt(bw.Current,bv)):bu==null?bv:bu!=null&&bu.$==4?bu.$0.Text:bu!=null&&bu.$==5?bu.$0:bu!=null&&bu.$==6?(bx=bu.$0,(bx.Dirty?bx.Dirty=false:void 0,F.foldBack(function(by,bz){return by.constructor===I?bt(by,bz):by;},bx.Els,bv))):bt(bu.$0,bt(bu.$1,bv));}bq=bp.El;bc.Iter((br=bp.El,function(bu){o.RemoveNode(br,bu);}),bc.Except(bc.DocChildren(bp),bc.Children(bp.El,bl.GetOptional(bp.Delimiters))));bt(bp.Children,(bs=bl.GetOptional(bp.Delimiters),bs!=null&&bs.$==1?bs.$0[1]:null));};F.get=function(bp,bq){F.checkBounds(bp,bq);return bp[bq];};F.length=function(bp){return bp.dims===2?bp.length*bp.length:bp.length;};F.checkBounds=function(bp,bq){if(bq<0||bq>=bp.length)f.FailWith("Index was outside the bounds of the array.");};F.set=function(bp,bq,br){F.checkBounds(bp,bq);bp[bq]=br;};H=G.T=bl.Class({GetEnumerator:function(){return new X.New(this,null,function(bp){var bq;bq=bp.s;return bq.$==0?false:(bp.c=bq.$0,bp.s=bq.$1,true);},void 0);},GetEnumerator0:function(){return N.Get(this);}},null,H);F.ofList=function(bp){var bq,br;br=[];bq=bp;while(!(bq.$==0)){br.push(G.head(bq));bq=G.tail(bq);}return br;};F.foldBack=function(bp,bq,br){var bs,bt,bu,bv,bw;bs=br;bu=bq.length;for(bv=1,bw=bu;bv<=bw;bv++)bs=bp(bq[bu-bv],bs);return bs;};F.iter=function(bp,bq){var br,bs;for(br=0,bs=bq.length-1;br<=bs;br++)bp(bq[br]);};F.map=function(bp,bq){var br,bs,bt;br=new a.Array(bq.length);for(bs=0,bt=bq.length-1;bs<=bt;bs++)br[bs]=bp(bq[bs]);return br;};F.tryPick=function(bp,bq){var br,bs,bt;br=null;bs=0;while(bs<bq.length&&br==null){bt=bp(bq[bs]);bt!=null&&bt.$==1?br=bt:void 0;bs=bs+1;}return br;};F.tryFindIndex=function(bp,bq){var br,bs;br=null;bs=0;while(bs<bq.length&&br==null){bp(bq[bs])?br={$:1,$0:bs}:void 0;bs=bs+1;}return br;};F.exists=function(bp,bq){var br,bs,bt,bu;br=false;bs=0;bu=F.length(bq);while(!br&&bs<bu)if(bp(bq[bs]))br=true;else bs=bs+1;return br;};F.filter=function(bp,bq){var br,bs,bt;br=[];for(bs=0,bt=bq.length-1;bs<=bt;bs++)if(bp(bq[bs]))br.push(bq[bs]);return br;};F.choose=function(bp,bq){var br,bs,bt,bu;br=[];for(bs=0,bt=bq.length-1;bs<=bt;bs++){bu=bp(bq[bs]);bu==null?void 0:br.push(bu.$0);}return br;};F.create=function(bp,bq){var br,bs,bt;br=new a.Array(bp);for(bs=0,bt=bp-1;bs<=bt;bs++)br[bs]=bq;return br;};F.concat=function(bp){return a.Array.prototype.concat.apply([],F.ofSeq(bp));};F.ofSeq=function(bp){var bq,br;if(bp instanceof a.Array)return bp.slice();else if(bp instanceof H)return F.ofList(bp);else{bq=[];br=N.Get(bp);try{while(br.MoveNext())bq.push(br.Current());return bq;}finally{if("Dispose"in br)br.Dispose();}}};F.pick=function(bp,bq){var br;br=F.tryPick(bp,bq);return br==null?f.FailWith("KeyNotFoundException"):br.$0;};F.init=function(bp,bq){var br,bs,bt;bp<0?f.FailWith("Negative size given."):null;br=new a.Array(bp);for(bs=0,bt=bp-1;bs<=bt;bs++)br[bs]=bq(bs);return br;};F.forall=function(bp,bq){var br,bs,bt,bu;br=true;bs=0;bu=F.length(bq);while(br&&bs<bu)if(bp(bq[bs]))bs=bs+1;else br=false;return br;};A.Obsolete=function(bp){var bq,br,bs,bt,bu;br=bp.s;if(br==null||(br!=null&&br.$==2?(bq=br.$1,false):br!=null&&br.$==3?(bq=br.$1,false):true))void 0;else{bp.s=null;for(bs=0,bt=F.length(bq)-1;bs<=bt;bs++){bu=F.get(bq,bs);typeof bu=="object"?function(bv){A.Obsolete(bv);}(bu):bu();}}};A.New=function(bp){return{s:bp};};J.get_UseAnimations=function(){return W.UseAnimations();};J.Play=function(bp){var bq;bq=null;return _1.Delay(function(){return _1.Bind(J.Run(a.ignore,W.Actions(bp)),function(){W.Finalize(bp);return _1.Return(null);});});};J.Append=function(bp,bq){return{$:0,$0:_2.Append(bp.$0,bq.$0)};};J.Concat=function(bp){return{$:0,$0:_2.Concat(Y.map(W.List,bp))};};J.Run=function(bp,bq){var br;function bs(bt){function bu(bv,bw){var bx;bx=bw-bv;bq.Compute(bx);bp();return bx<=br?void a.requestAnimationFrame(function(by){bu(bv,by);}):bt();}a.requestAnimationFrame(function(bv){bu(bv,bv);});}br=bq.Duration;return br===0?_1.Zero():_1.FromContinuations(function(bt,bu,bv){return bs.apply(null,[bt,bu,bv]);});};K.BatchUpdatesEnabled=function(){Q.$cctor();return Q.BatchUpdatesEnabled;};M.StartProcessor=function(bp){var bq;function br(){var bs;bs=null;return _1.Delay(function(){return _1.Bind(bp,function(){var bt;bt=bq[0];return bt===1?(bq[0]=0,_1.Zero()):bt===2?(bq[0]=1,br()):_1.Zero();});});}bq=[0];return function(){var bs;bs=bq[0];bs===0?(bq[0]=1,_1.Start(br(),null)):bs===1?bq[0]=2:void 0;};};G.head=function(bp){return bp.$==1?bp.$0:G.listEmpty();};G.tail=function(bp){return bp.$==1?bp.$1:G.listEmpty();};G.listEmpty=function(){return f.FailWith("The input list was empty.");};N.Get=function(bp){return bp instanceof a.Array?N.ArrayEnumerator(bp):v.Equals(typeof bp,"string")?N.StringEnumerator(bp):bp.GetEnumerator();};N.ArrayEnumerator=function(bp){return new X.New(0,null,function(bq){var br;br=bq.s;return br<F.length(bp)&&(bq.c=F.get(bp,br),bq.s=br+1,true);},void 0);};N.StringEnumerator=function(bp){return new X.New(0,null,function(bq){var br;br=bq.s;return br<bp.length&&(bq.c=bp[br],bq.s=br+1,true);},void 0);};N.Get0=function(bp){return bp instanceof a.Array?N.ArrayEnumerator(bp):v.Equals(typeof bp,"string")?N.StringEnumerator(bp):"GetEnumerator0"in bp?bp.GetEnumerator0():bp.GetEnumerator();};O.$cctor=function(){O.$cctor=a.ignore;O.EmptyAttr=null;};P.Int=function(){P.set_counter(P.counter()+1);return P.counter();};P.set_counter=function(bp){_3.$cctor();_3.counter=bp;};P.counter=function(){_3.$cctor();return _3.counter;};Q.$cctor=function(){Q.$cctor=a.ignore;Q.BatchUpdatesEnabled=true;Q.LoadedTemplates=new S.New$5();Q.LocalTemplatesLoaded=false;Q.TextHoleRE="\\${([^}]+)}";};S=R.Dictionary=bl.Class({set_Item:function(bp,bq){this.set(bp,bq);},TryGetValue:function(bp,bq){var br,bs,bt;br=this;bs=this.data[this.hash(bp)];return bs&&(bt=F.tryPick(function(bu){var bv;bv=f.KeyValue(bu);return br.equals.apply(null,[bv[0],bp])?{$:1,$0:bv[1]}:null;},bs),bt!=null&&bt.$==1&&(bq.set(bt.$0),true));},set:function(bp,bq){var br,bs,bt,bu;br=this;bs=this.hash(bp);bt=this.data[bs];bt?(bu=F.tryFindIndex(function(bv){return br.equals.apply(null,[(f.KeyValue(bv))[0],bp]);},bt),bu==null?(this.count=this.count+1,bt.push({K:bp,V:bq})):bt[bu.$0]={K:bp,V:bq}):(this.count=this.count+1,this.data[bs]=new a.Array({K:bp,V:bq}));},ContainsKey:function(bp){var bq,br;bq=this;br=this.data[this.hash(bp)];return br&&F.exists(function(bs){return bq.equals.apply(null,[(f.KeyValue(bs))[0],bp]);},br);},get_Item:function(bp){return this.get(bp);},get:function(bp){var bq,br;bq=this;br=this.data[this.hash(bp)];return br?F.pick(function(bs){var bt;bt=f.KeyValue(bs);return bq.equals.apply(null,[bt[0],bp])?{$:1,$0:bt[1]}:null;},br):_4.notPresent();},GetEnumerator:function(){return N.Get0(this);},GetEnumerator0:function(){return N.Get0(F.concat(C.GetFieldValues(this.data)));}},g,S);S.New$5=bl.Ctor(function(){S.New$6.call(this,[],v.Equals,v.Hash);},S);S.New$6=bl.Ctor(function(bp,bq,br){var bs,bt;this.equals=bq;this.hash=br;this.count=0;this.data=[];bs=N.Get(bp);try{while(bs.MoveNext()){bt=bs.Current();this.set(bt.K,bt.V);}}finally{if("Dispose"in bs)bs.Dispose();}},S);U.New=function(bp,bq){return{PreviousNodes:bp,Top:bq};};V.get_Empty=function(){return{$:0,$0:new Z.New$3()};};V.FindAll=function(bp){var bq;function br(bt){if(bt!=null&&bt.$==0){br(bt.$0);br(bt.$1);}else if(bt!=null&&bt.$==1)bs(bt.$0);else if(bt!=null&&bt.$==2)br(bt.$0.Current);else if(bt!=null&&bt.$==6)F.iter(bs,bt.$0.Holes);}function bs(bt){bq.push(bt);br(bt.Children);}bq=[];br(bp);return{$:0,$0:new Z.New$2(bq)};};V.Filter=function(bp,bq){return{$:0,$0:$.Filter(bp,bq.$0)};};V.Intersect=function(bp,bq){return{$:0,$0:$.Intersect(bp.$0,bq.$0)};};V.ToArray=function(bp){return $.ToArray(bp.$0);};V.Except=function(bp,bq){return{$:0,$0:$.Except(bp.$0,bq.$0)};};W.UseAnimations=function(){_0.$cctor();return _0.UseAnimations;};W.Actions=function(bp){return W.ConcatActions(F.choose(function(bq){return bq.$==1?{$:1,$0:bq.$0}:null;},_2.ToArray(bp.$0)));};W.Finalize=function(bp){F.iter(function(bq){if(bq.$==0)bq.$0();},_2.ToArray(bp.$0));};W.List=function(bp){return bp.$0;};W.ConcatActions=function(bp){var bq,br,bs,bt;bq=w.ofSeqNonCopying(bp);br=F.length(bq);return br===0?W.Const():br===1?F.get(bq,0):(bs=Y.max(Y.map(function(bu){return bu.Duration;},bq)),(bt=F.map(function(bu){return W.Prolong(bs,bu);},bq),W.Def(bs,function(bu){F.iter(function(bv){bv.Compute(bu);},bt);})));};W.Const=function(bp){return W.Def(0,function(){return bp;});};W.Prolong=function(bp,bq){var br,bs,bt;br=bq.Compute;bs=bq.Duration;bt=bh.Create(function(){return bq.Compute(bq.Duration);});return{Compute:function(bu){return bu>=bs?bt.f():br(bu);},Duration:bp};};W.Def=function(bp,bq){return{Compute:bq,Duration:bp};};X=N.T=bl.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},g,X);X.New=bl.Ctor(function(bp,bq,br,bs){this.s=bp;this.c=bq;this.n=br;this.d=bs;},X);Y.iter=function(bp,bq){var br;br=N.Get(bq);try{while(br.MoveNext())bp(br.Current());}finally{if("Dispose"in br)br.Dispose();}};Y.fold=function(bp,bq,br){var bs,bt;bs=bq;bt=N.Get(br);try{while(bt.MoveNext())bs=bp(bs,bt.Current());return bs;}finally{if("Dispose"in bt)bt.Dispose();}};Y.map=function(bp,bq){return{GetEnumerator:function(){var br;br=N.Get(bq);return new X.New(null,null,function(bs){return br.MoveNext()&&(bs.c=bp(br.Current()),true);},function(){br.Dispose();});}};};Y.max=function(bp){var bq,br,bs;bq=N.Get(bp);try{if(!bq.MoveNext())Y.seqEmpty();br=bq.Current();while(bq.MoveNext()){bs=bq.Current();v.Compare(bs,br)===1?br=bs:void 0;}return br;}finally{if("Dispose"in bq)bq.Dispose();}};Y.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};Z=R.HashSet=bl.Class({Contains:function(bp){var bq;bq=this.data[this.hash(bp)];return bq==null?false:this.arrContains(bp,bq);},Add:function(bp){return this.add(bp);},arrContains:function(bp,bq){var br,bs,bt,bu;br=true;bs=0;bu=bq.length;while(br&&bs<bu)if(this.equals.apply(null,[bq[bs],bp]))br=false;else bs=bs+1;return!br;},add:function(bp){var bq,br;bq=this.hash(bp);br=this.data[bq];return br==null?(this.data[bq]=[bp],this.count=this.count+1,true):this.arrContains(bp,br)?false:(br.push(bp),this.count=this.count+1,true);},IntersectWith:function(bp){var bq,br,bs,bt,bu;bq=new Z.New$4(bp,this.equals,this.hash);br=bf.concat(this.data);for(bs=0,bt=br.length-1;bs<=bt;bs++){bu=br[bs];!bq.Contains(bu)?this.Remove(bu):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bp){var bq,br,bs,bt;bq=0;br=bf.concat(this.data);for(bs=0,bt=br.length-1;bs<=bt;bs++)F.set(bp,bs,br[bs]);},ExceptWith:function(bp){var bq;bq=N.Get(bp);try{while(bq.MoveNext())this.Remove(bq.Current());}finally{if("Dispose"in bq)bq.Dispose();}},Remove:function(bp){var bq;bq=this.data[this.hash(bp)];return bq==null?false:this.arrRemove(bp,bq)&&(this.count=this.count-1,true);},arrRemove:function(bp,bq){var br,bs,bt,bu;br=true;bs=0;bu=bq.length;while(br&&bs<bu)if(this.equals.apply(null,[bq[bs],bp])){bq.splice.apply(bq,[bs,1]);br=false;}else bs=bs+1;return!br;},GetEnumerator:function(){return N.Get(bf.concat(this.data));},GetEnumerator0:function(){return N.Get(bf.concat(this.data));}},g,Z);Z.New$3=bl.Ctor(function(){Z.New$4.call(this,[],v.Equals,v.Hash);},Z);Z.New$2=bl.Ctor(function(bp){Z.New$4.call(this,bp,v.Equals,v.Hash);},Z);Z.New$4=bl.Ctor(function(bp,bq,br){var bs;this.equals=bq;this.hash=br;this.data=[];this.count=0;bs=N.Get(bp);try{while(bs.MoveNext())this.add(bs.Current());}finally{if("Dispose"in bs)bs.Dispose();}},Z);_0.$cctor=function(){_0.$cctor=a.ignore;_0.CubicInOut=_7.Custom(function(bp){var bq;bq=bp*bp;return 3*bq-2*(bq*bp);});_0.UseAnimations=true;};_1.Delay=function(bp){return function(bq){try{(bp(null))(bq);}catch(br){bq.k({$:1,$0:br});}};};_1.Bind=function(bp,bq){return _1.checkCancel(function(br){bp(_8.New(function(bs){var bt;if(bs.$==0){bt=bs.$0;_1.scheduler().Fork(function(){try{(bq(bt))(br);}catch(bu){br.k({$:1,$0:bu});}});}else _1.scheduler().Fork(function(){br.k(bs);});},br.ct));});};_1.Zero=function(){_9.$cctor();return _9.Zero;};_1.Start=function(bp,bq){var br,bs;br=(bs=(_1.defCTS())[0],bq==null?bs:bq.$0);_1.scheduler().Fork(function(){if(!br.c)bp(_8.New(function(bt){if(bt.$==1)_1.UncaughtAsyncError(bt.$0);},br));});};_1.Return=function(bp){return function(bq){bq.k({$:0,$0:bp});};};_1.checkCancel=function(bp){return function(bq){if(bq.ct.c)_1.cancel(bq);else bp(bq);};};_1.defCTS=function(){_9.$cctor();return _9.defCTS;};_1.UncaughtAsyncError=function(bp){bm.log("WebSharper: Uncaught asynchronous exception",bp);};_1.FromContinuations=function(bp){return function(bq){var br;function bs(bt){if(br[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{br[0]=true;_1.scheduler().Fork(bt);}}br=[false];bp(function(bt){bs(function(){bq.k({$:0,$0:bt});});},function(bt){bs(function(){bq.k({$:1,$0:bt});});},function(bt){bs(function(){bq.k({$:2,$0:bt});});});};};_1.cancel=function(bp){bp.k({$:2,$0:new be.New(bp.ct)});};_1.scheduler=function(){_9.$cctor();return _9.scheduler;};_2.Append=function(bp,bq){return bp.$==0?bq:bq.$==0?bp:{$:2,$0:bp,$1:bq};};_2.Concat=function(bp){var bq;bq=w.ofSeqNonCopying(bp);return w.TreeReduce(_2.Empty(),_2.Append,bq);};_2.ToArray=function(bp){var bq;function br(bs){if(bs.$==1)bq.push(bs.$0);else if(bs.$==2){br(bs.$0);br(bs.$1);}else if(bs.$==3)F.iter(function(bt){bq.push(bt);},bs.$0);}bq=[];br(bp);return bq.slice(0);};_2.Empty=function(){bg.$cctor();return bg.Empty;};_3.$cctor=function(){_3.$cctor=a.ignore;_3.counter=0;};_4.notPresent=function(){return f.FailWith("The given key was not present in the dictionary.");};_5.string=function(bp,bq,br){return bq==null?br!=null&&br.$==1?bp.slice(0,br.$0+1):"":br==null?bp.slice(bq.$0):bp.slice(bq.$0,br.$0+1);};_6.concat=function(bp,bq){return F.ofSeq(bq).join(bp);};_6.StartsWith=function(bp,bq){return bp.substring(0,bq.length)==bq;};_6.SplitChars=function(bp,bq,br){return _6.Split(bp,new a.RegExp("["+_6.RegexEscape(bq.join(""))+"]"),br);};_6.RegexEscape=function(bp){return bp.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_6.Split=function(bp,bq,br){return br===1?F.filter(function(bs){return bs!=="";},_6.SplitWith(bp,bq)):_6.SplitWith(bp,bq);};_6.SplitWith=function(bp,bq){return bp.split(bq);};_7=h.Easing=bl.Class({},g,_7);_7.Custom=function(bp){return new _7.New(bp);};_7.New=bl.Ctor(function(bp){this.transformTime=bp;},_7);_8.New=function(bp,bq){return{k:bp,ct:bq};};_9.$cctor=function(){_9.$cctor=a.ignore;_9.noneCT=_.New(false,[]);_9.scheduler=new ba.New();_9.defCTS=[new bb.New()];_9.Zero=_1.Return();_9.GetCT=function(bp){bp.k({$:0,$0:bp.ct});};};_.New=function(bp,bq){return{c:bp,r:bq};};$.Filter=function(bp,bq){return new Z.New$2(F.filter(bp,$.ToArray(bq)));};$.Intersect=function(bp,bq){var br;br=new Z.New$2($.ToArray(bp));br.IntersectWith($.ToArray(bq));return br;};$.ToArray=function(bp){var bq;bq=F.create(bp.get_Count(),void 0);bp.CopyTo(bq);return bq;};$.Except=function(bp,bq){var br;br=new Z.New$2($.ToArray(bq));br.ExceptWith($.ToArray(bp));return br;};ba=_1.Scheduler=bl.Class({Fork:function(bp){var bq;bq=this;this.robin.push(bp);this.idle?(this.idle=false,a.setTimeout(function(){bq.tick();},0)):void 0;},tick:function(){var bp,bq,br;bq=this;br=bo.now();bp=true;while(bp)if(this.robin.length===0){this.idle=true;bp=false;}else{(this.robin.shift())();bo.now()-br>40?(a.setTimeout(function(){bq.tick();},0),bp=false):void 0;}}},g,ba);ba.New=bl.Ctor(function(){this.idle=true;this.robin=[];},ba);bb=e.CancellationTokenSource=bl.Class({},g,bb);bb.New=bl.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bb);bc.DocChildren=function(bp){var bq;function br(bs){if(bs!=null&&bs.$==2)br(bs.$0.Current);else if(bs!=null&&bs.$==1)bq.push(bs.$0.El);else if(bs==null);else if(bs!=null&&bs.$==5)bq.push(bs.$0);else if(bs!=null&&bs.$==4)bq.push(bs.$0.Text);else if(bs!=null&&bs.$==6)F.iter(function(bt){if(bt.constructor===I)br(bt);else bq.push(bt);},bs.$0.Els);else{br(bs.$0);br(bs.$1);}}bq=[];br(bp.Children);return{$:0,$0:w.ofSeqNonCopying(bq)};};bc.Children=function(bp,bq){var br,bs,bt;if(bq!=null&&bq.$==1){bt=[];br=bq.$0[0].nextSibling;while(br!==bq.$0[1]){bt.push(br);br=br.nextSibling;}return{$:0,$0:bt};}else return{$:0,$0:F.init(bp.childNodes.length,(bs=bp.childNodes,function(bu){return bs[bu];}))};};bc.Except=function(bp,bq){var br;br=bp.$0;return{$:0,$0:F.filter(function(bs){return F.forall(function(bt){return!(bs===bt);},br);},bq.$0)};};bc.Iter=function(bp,bq){F.iter(bp,bq.$0);};bd.Clear=function(bp){bp.splice(0,F.length(bp));};be=e.OperationCanceledException=bl.Class({},null,be);be.New=bl.Ctor(function(bp){be.New$1.call(this,"The operation was canceled.",null,bp);},be);be.New$1=bl.Ctor(function(bp,bq,br){this.message=bp;this.inner=bq;this.ct=br;},be);bf.concat=function(bp){var bq,br;bq=[];for(var bs in bp)bq.push.apply(bq,bp[bs]);return bq;};bg.$cctor=function(){bg.$cctor=a.ignore;bg.Empty={$:0};};bh.Create=function(bp){return bj.New(false,bp,bh.forceLazy);};bh.forceLazy=function(){var bp;bp=this.v();this.c=true;this.v=bp;this.f=bh.cachedLazy;return bp;};bh.cachedLazy=function(){return this.v;};bj.New=function(bp,bq,br){return{c:bp,v:bq,f:br};};bl.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
